import{a as B}from"./axios-G2rPRu76.js";import{_ as b,X as C,r as p,Y as x,c as m,b as r,w as d,o as u,u as e,F as y,a4 as D,t as F,a as N,a2 as T,B as $,Z as I}from"./index-SGO5OOPy.js";import{V as c,a as g}from"./VRow-SKQ4CCOT.js";import{V}from"./VSelect-XRxo3SYo.js";import{V as O}from"./VTextField-zjRFJMH_.js";import{V as U}from"./VDataTable-3nZzmSqx.js";/* empty css              */import"./form-syYsj1LP.js";import"./forwardRefs-y8pOSn8h.js";import"./VMenu-Jk-FC-iD.js";import"./index-vWDdzW97.js";import"./ssrBoot-dRiIKdbQ.js";import"./VImg-nJ6DsKWr.js";import"./VAvatar-aQ_KeIL1.js";import"./VDivider-J_lD5GQp.js";import"./VOverlay-sta7PfT3.js";import"./easing-Apq16fr0.js";import"./lazy-Dwtquv-K.js";import"./dialog-transition-H9M13_Jl.js";import"./VCheckboxBtn-N82T6j1u.js";import"./VField-JCquXGl7.js";import"./VChip-AExESlP7.js";import"./VTable-GWFtDMSE.js";const R={key:0},j={__name:"students",setup(z){const f=C(),n=p({data:[],headers:[],search:""});let h=window.location.protocol+"//"+window.location.hostname+":8080";B.get(h+"/api/v1/student/allStudents",{headers:{"Content-Type":"application/json",Authorization:x.get("Authorization")}}).then(o=>{console.log(o);let t=o.data;const a=["num","reserved","guardians"];n.value.headers=Object.keys(t[0]).filter(i=>!a.includes(i));for(var l=0;l<t.length;l++){const i=new Date(t[l].dateOfBirth),v=String(i.getDate()).padStart(2,"0"),w=String(i.getMonth()+1).padStart(2,"0"),A=i.getFullYear();t[l].dateOfBirth=`${v}-${w}-${A}`,console.log(t[l].dateOfBirth),a.forEach(k=>{delete t[l][k]})}n.value.data=t}).catch(o=>{console.log(o),(o.response&&o.response.status===401||o.response.status===403)&&window.open("/login","_blank")});let _="";const S=o=>{f.push(`/viewStudent?admNo=${o.admNo}`)},s=p({stage:"All",stream:"All"});return(o,t)=>(u(),m("div",null,[r(c,null,{default:d(()=>[r(g,null,{default:d(()=>[r(V,{label:"Select Stage (Form)",items:["All","1","2","3","4","Alumini"],modelValue:e(s).stage,"onUpdate:modelValue":t[0]||(t[0]=a=>e(s).stage=a)},null,8,["modelValue"])]),_:1}),r(g,null,{default:d(()=>[r(V,{label:"Select Stream ",items:["All","A","B","C"],modelValue:e(s).stream,"onUpdate:modelValue":t[1]||(t[1]=a=>e(s).stream=a)},null,8,["modelValue"])]),_:1})]),_:1}),r(c,null,{default:d(()=>[r(O,{modelValue:e(n).search,"onUpdate:modelValue":t[2]||(t[2]=a=>e(n).search=a),label:"Search",onInput:e(_)},null,8,["modelValue","onInput"]),r(U,{items:e(n).data,class:"elevation-1 custom-table",striped:"",search:e(n).search,"items-per-page":e(s).stage=="All"?10:e(n).data.length},{item:d(({item:a})=>[(e(s).stage=="All"||e(s).stage==a.stage)&&(e(s).stream=="All"||e(s).stream==a.stream)?(u(),m("tr",R,[(u(!0),m(y,null,D(e(n).headers,l=>(u(),m("td",{key:l.value},F(a[l]),1))),128)),N("td",null,[r(T,{onClick:l=>S(a)},{default:d(()=>[$("View")]),_:2},1032,["onClick"])])])):I("",!0)]),_:1},8,["items","search","items-per-page"])]),_:1})]))}},ie=b(j,[["__scopeId","data-v-470d4a4e"]]);export{ie as default};
