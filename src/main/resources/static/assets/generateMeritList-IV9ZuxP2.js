import{a as v}from"./axios-G2rPRu76.js";import{_ as k,X as x,r as A,Y as h,c as M,b as s,w as i,o as R,u as o,a2 as B}from"./index--uHrWztf.js";import{V as j,a as _}from"./VRow-C1Q3znKN.js";import{V as N}from"./VSelect-EssjzhX8.js";import{V as z}from"./VTextField-YveBRxC6.js";import{V as L}from"./VDataTable-_V6xC0V4.js";/* empty css              */import"./form-gRAo9SrI.js";import"./forwardRefs-y8pOSn8h.js";import"./VMenu-Fh5_tsfm.js";import"./index-EqZBXuIc.js";import"./ssrBoot-YvMPSAVD.js";import"./VImg-T1wKAj7l.js";import"./VAvatar-UovGB6ZZ.js";import"./VDivider-rjHNxqrv.js";import"./VOverlay-Ko1djXxg.js";import"./easing-imumzmxr.js";import"./lazy-sG_msKxB.js";import"./VCheckboxBtn-k6b5wbXb.js";import"./VField-A8xS_5ao.js";import"./VChip-0IljYP5g.js";import"./VTable-ZP4PhMxV.js";const I={__name:"generateMeritList",setup($){const g=x(),e=A({data:[],headers:[],search:""});let n=window.location.protocol+"//"+window.location.hostname+":8080",f=g.currentRoute.value.query.exam,S=g.currentRoute.value.query.stage,b=[],d=[],m=[],c=[],V=[];const r=new Map;v.get(n+"/api/v1/subjectSelection/availableSubjects",{headers:{Authorization:h.get("Authorization")}}).then(t=>{console.log(t),V=t.data,V.forEach(a=>{r.set(a.subjectCode,{subjectName:a.subjectName,subjectRep:a.subjectRep})}),console.log(r),console.log(r.get(101))}),v.get(n+`/api/v1/meritList/generate/${f}/${S}`,{headers:{"Content-Type":"application/json",Authorization:h.get("Authorization")}}).then(t=>{console.log(t);let a=t.data;b=a,e.value.data=a,e.value.headers=[{title:"Overall Pos",value:"classRank"},{title:"Stream",value:"stream"},{title:"Stream Pos",value:"streamRank"},{title:"Adm No",value:"admNo"},{title:"Student Name",value:"studentName"}],r.forEach((u,p)=>{e.value.headers.push({title:r.get(p).subjectRep,value:"subjectMarks."+p}),e.value.headers.push({title:"G",value:"subjectGrades."+p})}),e.value.headers.push({title:"Aggr Points",value:"points"}),e.value.headers.push({title:"Aggr Grade",value:"aggregateGrade"}),e.value.headers.push({title:"Entry Marks",value:"kcpeMarks"}),console.log(e.value.headers)}).catch(t=>{console.log(t),(t.response&&t.response.status===401||t.response.status===403)&&window.open("/login","_blank")});let w="";const l=A({selectedStream:"All"}),C=()=>{if(e.value.data=[],l.value.selectedStream=="All"){e.value.data=b;return}if(l.value.selectedStream=="A"&&d.length>0){e.value.data=d;return}if(l.value.selectedStream=="B"&&m.length>0){e.value.data=m;return}if(l.value.selectedStream=="C"&&c.length>0){e.value.data=c;return}v.get(n+`/api/v1/meritList/viewMerit/${f}/${S}?stream=${l.value.selectedStream}`,{headers:{"Content-Type":"application/json",Authorization:h.get("Authorization")}}).then(t=>{e.value.data=t.data,l.value.selectedStream=="A"&&(d=t.data),l.value.selectedStream=="B"&&(m=t.data),l.value.selectedStream=="C"&&(c=t.data)})};return(t,a)=>(R(),M("div",null,[s(j,null,{default:i(()=>[s(_,null,{default:i(()=>[s(N,{label:"Select Stream ",items:["All","A","B","C"],modelValue:o(l).selectedStream,"onUpdate:modelValue":a[0]||(a[0]=u=>o(l).selectedStream=u)},null,8,["modelValue"])]),_:1}),s(_,null,{default:i(()=>[s(B,{text:"Fetch Stream MeritList",onClick:C})]),_:1})]),_:1}),s(j,null,{default:i(()=>[s(z,{modelValue:o(e).search,"onUpdate:modelValue":a[1]||(a[1]=u=>o(e).search=u),label:"Search",onInput:o(w)},null,8,["modelValue","onInput"]),s(L,{items:o(e).data,class:"elevation-1 custom-table",striped:"",search:o(e).search,headers:o(e).headers},null,8,["items","search","headers"])]),_:1})]))}},se=k(I,[["__scopeId","data-v-272d96ef"]]);export{se as default};
