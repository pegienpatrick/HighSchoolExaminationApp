import{a as V}from"./axios-G2rPRu76.js";import{_ as A,X as M,r as d,Y as b,c as C,b as e,w as t,o as R,a2 as m,u as a,V as I,B as c,t as g}from"./index-SGO5OOPy.js";import{V as f,a as u}from"./VRow-SKQ4CCOT.js";import{V as z}from"./VField-JCquXGl7.js";import{a as S,b as $,V as j}from"./VCard-iwGy2QZm.js";import{V as T}from"./VForm-7zjsCCKO.js";import{V as B}from"./VSelect-XRxo3SYo.js";import{V as N}from"./VTextField-zjRFJMH_.js";import{V as F}from"./VDataTable-3nZzmSqx.js";/* empty css              */import"./index-vWDdzW97.js";import"./VImg-nJ6DsKWr.js";import"./form-syYsj1LP.js";import"./easing-Apq16fr0.js";import"./VAvatar-aQ_KeIL1.js";import"./forwardRefs-y8pOSn8h.js";import"./VMenu-Jk-FC-iD.js";import"./ssrBoot-dRiIKdbQ.js";import"./VDivider-J_lD5GQp.js";import"./VOverlay-sta7PfT3.js";import"./lazy-Dwtquv-K.js";import"./dialog-transition-H9M13_Jl.js";import"./VCheckboxBtn-N82T6j1u.js";import"./VChip-AExESlP7.js";import"./VTable-GWFtDMSE.js";const L={__name:"marksSheet",setup(H){const k=M();let x=window.location.protocol+"//"+window.location.hostname+":8080",i=k.currentRoute.value.query.exam,n=k.currentRoute.value.query.stage;const h=d({data:"All"}),y=d({data:[],showForm:!1}),v=d({year:2024,term:"",title:""});d({data:[]});const s=d({data:[],filtered:[],search:""});V.get(x+`/api/v1/examination/viewExamination/${i}`,{headers:{Authorization:b.get("Authorization")}}).then(o=>{v.value=o.data});const p=d({data:[]});let w=[];const _=new Map;V.get(x+"/api/v1/subjectSelection/availableSubjects",{headers:{Authorization:b.get("Authorization")}}).then(o=>{console.log(o),w=o.data,w.forEach(l=>{_.set(l.subjectCode,{subjectName:l.subjectName,subjectRep:l.subjectRep})}),console.log(_),console.log(_.get(101))}),V.get(x+`/api/v1/marks/viewMarksSheet/${i}/${n}`,{headers:{Authorization:b.get("Authorization")}}).then(o=>{console.log(o);var r=Object.keys(o.data[0]);console.log(r);for(var l=0;l<r.length-1;l++)r[l]!="examination"&&p.value.data.push({title:r[l],value:r[l],align:"center",show:!0,type:1,key:r[l]});for(var r=Object.keys(o.data[0].marks),l=0;l<r.length;l++)p.value.data.push({title:_.get(parseInt(r[l])).subjectName+"("+r[l]+")",value:"marks."+r[l]+".marks",show:!1,type:2,key:"marks."+r[l]+".marks",sortable:!0});console.log(p.value.data),s.value.data=o.data,s.value.filtered=o.data,y.value.data=p});const E=()=>{console.log("filtering"),s.value.filtered=[];for(var o=0;o<s.value.data.length;o++)s.value.data[o].stream==h.value.data&&s.value.filtered.push(s.value.data[o]);return console.log(s.value.filtered),s.value.filtered};return(o,l)=>(R(),C("div",null,[e(f,null,{default:t(()=>[e(u,null,{default:t(()=>[e(m,{to:`/viewExam?examinationId=${a(i)}&stage=${a(n)}`,text:"Exam Home"},{default:t(()=>[e(I,{icon:"ri-home-line"}),e(z),c(" Exam Home ")]),_:1},8,["to"])]),_:1}),e(u,null,{default:t(()=>[e(m,{to:`/editMarksSheet?exam=${a(i)}&stage=${a(n)}`,text:"Edit Marks"},null,8,["to"])]),_:1}),e(u,null,{default:t(()=>[e(m,{text:"View Merit List",to:`/viewMeritList?exam=${a(i)}&stage=${a(n)}`},null,8,["to"])]),_:1}),e(u,null,{default:t(()=>[e(m,{to:`/generateMeritList?exam=${a(i)}&stage=${a(n)}`,text:"Generate Exam Results"},null,8,["to"])]),_:1}),e(u,null,{default:t(()=>[e(m,{text:"Reports",to:`/viewExamReports?examinationId=${a(i)}&stage=${a(n)}`},null,8,["to"])]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(u,null,{default:t(()=>[e(S,null,{default:t(()=>[e($,null,{default:t(()=>[c(" Exarm Information ")]),_:1}),e(j,null,{default:t(()=>[e(T,null,{default:t(()=>[e(f,null,{default:t(()=>[e(u,{md:"6",cols:"12"},{default:t(()=>[c(g(a(v).title),1)]),_:1}),e(u,{md:"6",cols:"12"},{default:t(()=>[c(" Year : "+g(a(v).year),1)]),_:1}),e(u,{md:"6",cols:"12"},{default:t(()=>[c(" Form "+g(a(n)),1)]),_:1}),e(u,{md:"6",cols:"12"},{default:t(()=>[c(" Term "+g(a(v).term),1)]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(u,null,{default:t(()=>[e(B,{label:"Stream",placeholder:"Select Stream",items:["All","A","B","C"],modelValue:a(h).data,"onUpdate:modelValue":l[0]||(l[0]=r=>a(h).data=r)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(u,null,{default:t(()=>[e(S,null,{default:t(()=>[e($,null,{default:t(()=>[e(f,null,{default:t(()=>[e(u,null,{default:t(()=>[e(m,{text:"Edit Marks",to:`/editMarksSheet?exam=${a(i)}&stage=${a(n)}`},null,8,["to"])]),_:1})]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(u,null,{default:t(()=>[e(N,{modelValue:a(s).search,"onUpdate:modelValue":l[1]||(l[1]=r=>a(s).search=r),label:"Search",clearable:""},null,8,["modelValue"])]),_:1}),e(F,{items:a(h).data=="All"?a(s).data:E(),search:a(s).search,class:"elevation-1",striped:"",headers:a(p).data},null,8,["items","search","headers"])]),_:1})]),_:1})]),_:1})]),_:1})]))}},ce=A(L,[["__scopeId","data-v-276d4168"]]);export{ce as default};
