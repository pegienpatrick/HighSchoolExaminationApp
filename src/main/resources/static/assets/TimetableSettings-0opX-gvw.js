import{x as Y,y as Z,bG as q,D as J,bH as O,L as X,n as e,Q as ee,r as A,R as f,ag as le,c as U,a as $,m as l,u as n,F as I,o as _,a2 as V,b as T,a4 as G,l as F,a3 as te,N as ae,t as C,V as x,Z as oe,k as ue}from"./index-romlxh2l.js";import{a as p}from"./axios-G2rPRu76.js";import{s as H}from"./sweetalert2.all-Fhd7KRpE.js";import{V as r,a as u}from"./VRow-hVaYJ55S.js";import{V as se}from"./VDialog-gQEHFHTQ.js";import{a as h,V as v,b as N,d as P,c as ne}from"./VCard-CyiRyH--.js";import{V as R}from"./VForm-y28LfJsU.js";import{V as re}from"./VCheckbox-OLYQjUXN.js";import{V as k}from"./VTextField-bp9PzvYN.js";import{V as j}from"./VSpacer-kPU_l-mM.js";/* empty css              */import"./VOverlay-rrnKEEX7.js";import"./easing-Apq16fr0.js";import"./lazy-d4sMYynm.js";import"./VImg-sw7GzouM.js";import"./forwardRefs-y8pOSn8h.js";import"./dialog-transition-K9MCZFuZ.js";import"./VAvatar-1wPPUIPn.js";import"./form-_QGCC3D4.js";import"./VCheckboxBtn-hIAm7C42.js";import"./VLabel-xfaH5ioj.js";import"./VField-jGGqTOnS.js";import"./index-ljTxfukq.js";const ie=Y({...Z(),...q()},"VLayout"),de=J()({name:"VLayout",props:ie(),setup(w,m){let{slots:s}=m;const{layoutClasses:b,layoutStyles:i,getLayoutItem:z,items:S,layoutRef:B}=O(w);return X(()=>{var y;return e("div",{ref:B,class:[b.value,w.class],style:[i.value,w.style]},[(y=s.default)==null?void 0:y.call(s)])}),{getLayoutItem:z,items:S}}}),Ie={__name:"TimetableSettings",setup(w){ee();let m=window.location.protocol+"//"+window.location.hostname+":8080";const s=A({year:2024,term:"",title:"",grades:[],sel:[],success:null});let b=["1","2","3","4"];const i=A({show:!1,item:null}),z=a=>{i.value.show=!0,i.value.item=a},S=a=>{H.fire({title:"Delete Break",text:"Are you sure you want to delete this Break?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&p.delete(m+`/api/v1/slots/delete/${a.num}`,{headers:{Authorization:f.get("Authorization")}}).then(c=>{console.log(c),g()})})},B=()=>{s.value.grades=[];for(var a=0;a<b.length;a++)s.value.sel[parseInt(a)]&&s.value.grades.push(parseInt(a)+1);console.log(s.value.grades),p.post(m+"/api/v1/timetable/setSpecializedGrades",s.value.grades,{headers:{Authorization:f.get("Authorization")}}).then(t=>{console.log(t),s.value.success=!0,window.setTimeout(()=>{s.value.success=null},2e3)}).catch(t=>{console.log(t);var c="";t.response.data.message?c=t.response.data.message:c=t.response.data,alert("error "+c)})};p.get(m+"/api/v1/timetable/getSpecializedGrades",{headers:{Authorization:f.get("Authorization")}}).then(a=>{console.log(a),s.value.sel=[!1,!1,!1,!1],s.value.grades=a.data;for(var t=0;t<s.value.grades.length;t++)s.value.sel[s.value.grades[t]-1]=!0;console.log(s.value.grades),console.log(s.value.sel)});const y=A([]),g=()=>{p.get(m+"/api/v1/slots/listSlots",{headers:{Authorization:f.get("Authorization")}}).then(a=>{console.log(a),y.value=a.data})};g();const K=()=>{H.fire({title:"Enter Break Title",input:"text",inputLabel:"Break Title",inputPlaceholder:"Type here...",showCancelButton:!0}).then(a=>{a&&p.get(m+"/api/v1/slots/addBreak?title="+a.value,{headers:{Authorization:f.get("Authorization")}}).then(t=>{console.log(t),g()})})},E=(a,t)=>{p.get(m+`/api/v1/slots/move/${t}/${a}`,{headers:{Authorization:f.get("Authorization")}}).then(c=>{console.log(c),g()})},d=A({success:null});(()=>{p.get(m+"/api/v1/slots/lessonsPerDay",{headers:{Authorization:f.get("Authorization")}}).then(a=>{console.log(a),d.value=a.data})})();const M=()=>{d.value.startTime.length<8&&(d.value.startTime+=":00"),console.log(d.value),p.put(m+"/api/v1/slots/lessonsPerDay",d.value,{headers:{Authorization:f.get("Authorization")}}).then(a=>{console.log(a),d.value.success=!0,window.setTimeout(()=>{d.value.success=null},2e3),g()})},Q=()=>{console.log(i.value),p.put(m+"/api/v1/slots/updateSlot",i.value.item,{headers:{Authorization:f.get("Authorization")}}).then(a=>{console.log(a),i.value.show=!1,i.value.success=!0,window.setTimeout(()=>{i.value.success=null},2e3),g()})};return(a,t)=>{const c=ue("v-flex"),W=le("draggable");return _(),U(I,null,[$("div",null,[e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(h,null,{default:l(()=>[e(v,null,{default:l(()=>[e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(V,{text:"TimeTable Home",to:"/teachingTimeTable"})]),_:1}),e(u,null,{default:l(()=>[e(V,{text:"Venues",to:"/venues"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(h,null,{default:l(()=>[e(N,null,{default:l(()=>[T(" Select Forms With Selected Subjects ")]),_:1}),e(v,null,{default:l(()=>[e(R,{onSubmit:t[1]||(t[1]=o=>{a.preventDefault(),a.submitform()})},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{md:"6",cols:"12"},{default:l(()=>[(_(!0),U(I,null,G(n(b),o=>(_(),F(re,{key:o,label:`Form ${o}`,modelValue:n(s).sel[parseInt(o)-1],"onUpdate:modelValue":L=>n(s).sel[parseInt(o)-1]=L},null,8,["label","modelValue","onUpdate:modelValue"]))),128))]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(V,{text:n(s).success==null?"Update Changes":"Updated",color:n(s).success==null?"primary":"success",type:"Submit",onClick:t[0]||(t[0]=te(o=>B(),["prevent"]))},null,8,["text","color"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(h,null,{default:l(()=>[e(P,null,{default:l(()=>[e(r,null,{default:l(()=>[e(u)]),_:1})]),_:1}),e(v,null,{default:l(()=>[e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(R,null,{default:l(()=>[e(r,null,{default:l(()=>[e(u,{cols:"12",md:"4"},{default:l(()=>[e(k,{label:"Lessons Per Day",type:"number",modelValue:n(d).lessons,"onUpdate:modelValue":t[2]||(t[2]=o=>n(d).lessons=o)},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(k,{type:"number",label:"Lesson Duration",modelValue:n(d).duration,"onUpdate:modelValue":t[3]||(t[3]=o=>n(d).duration=o)},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(k,{label:"Lessons Start At",type:"time",modelValue:n(d).startTime,"onUpdate:modelValue":t[4]||(t[4]=o=>n(d).startTime=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(V,{class:"w-100",variant:"outlined",text:n(d).success==null?"Save Changes":"Updated",color:n(d).success==null?"primary":"success",onClick:M},null,8,["text","color"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(h,null,{default:l(()=>[e(N,null,{default:l(()=>[T("Lessons Arrangement")]),_:1}),e(P,null,{default:l(()=>[e(V,{"prepend-icon":"ri-add-line",text:"Add New Break",onClick:K})]),_:1}),e(v,null,{default:l(()=>[e(de,{style:{overflow:"auto"}},{default:l(()=>[(_(!0),U(I,null,G(n(y),(o,L)=>ae((_(),F(c,{key:L,class:"item"},{default:l(()=>[e(h,null,{default:l(()=>[e(N,null,{default:l(()=>[T(C(o.title),1)]),_:2},1024),e(v,null,{default:l(()=>[$("span",null,C(o.start)+" - "+C(o.end),1)]),_:2},1024),e(v,null,{default:l(()=>[$("p",null,C(o.duration)+" minutes ",1)]),_:2},1024),e(v,null,{default:l(()=>[T(C(o.slotType),1)]),_:2},1024),o.slotType=="BREAK"?(_(),F(P,{key:0,class:"d-block",style:{display:"block"}},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(x,{icon:"ri-arrow-left-line",onClick:D=>E("left",o.num)},null,8,["onClick"])]),_:2},1024),e(u,{cols:"6"},{default:l(()=>[e(x,{icon:"ri-arrow-right-line",onClick:D=>E("right",o.num)},null,8,["onClick"])]),_:2},1024)]),_:2},1024),e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(x,{icon:"ri-eraser-line",onClick:D=>S(o),color:"error"},null,8,["onClick"])]),_:2},1024),e(u,null,{default:l(()=>[e(x,{icon:"ri-edit-line",onClick:D=>z(o)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):oe("",!0)]),_:2},1024)]),_:2},1024)),[[W,".item"]])),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),e(se,{modelValue:n(i).show,"onUpdate:modelValue":t[7]||(t[7]=o=>n(i).show=o),class:"modal fade small-modal",cols:"12","max-width":"600"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(h,{title:"Edit Exam Title"},{default:l(()=>[e(v,null,{default:l(()=>[e(R,null,{default:l(()=>[e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(k,{label:"New Title",modelValue:n(i).item.title,"onUpdate:modelValue":t[5]||(t[5]=o=>n(i).item.title=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(k,{label:"Duration (minutes)",modelValue:n(i).item.duration,"onUpdate:modelValue":t[6]||(t[6]=o=>n(i).item.duration=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(j),e(j),e(r,null,{default:l(()=>[e(u)]),_:1}),e(ne,null,{default:l(()=>[e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(V,{class:"w-100",variant:"outlined",text:n(i).success==null?"Save Changes":"Updated",color:n(i).success==null?"primary":"success",onClick:Q},null,8,["text","color"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{Ie as default};
