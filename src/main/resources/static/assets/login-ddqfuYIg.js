import{l as C}from"./logo-lSNaS3Cd.js";import{a as T,b as P,c as B,d as E}from"./auth-v1-tree-EbS1KF2o.js";import{a as L}from"./axios-G2rPRu76.js";import{Q as N,r as h,j as D,h as R,c as F,n as e,m as t,u as n,o as g,a as r,b as c,a2 as I,l as M,Z as p,t as S,R as j,k as U,a1 as z}from"./index-K_k6ND3E.js";import{a as H,d as A,b as Q,V as _}from"./VCard-ErPIkXyl.js";import{V as f}from"./VImg-SduuTbD5.js";import{V as W}from"./VForm-HpRu4jcl.js";import{V as Z,a as u}from"./VRow-T7aeklux.js";import{V as b}from"./VTextField-Q68vMtJf.js";import{V as $}from"./VCheckbox-ib8YTfqb.js";import"./VDivider-v32a3-l-.js";import"./VAvatar-Dku5dScd.js";import"./form-48_n9LpB.js";import"./forwardRefs-y8pOSn8h.js";/* empty css              */import"./VField-8R3V7oUj.js";import"./index-FnY5H3OG.js";import"./VLabel-X9XlDOqr.js";import"./easing-Apq16fr0.js";import"./VCheckboxBtn-ZEmq0s3c.js";const q={class:"auth-wrapper d-flex align-center justify-center pa-4"},G={class:"d-flex"},J=["innerHTML"],K=r("h5",{class:"text-h5 font-weight-semibold mb-1"}," Welcome to PExam System! 👋🏻 ",-1),O=r("p",{class:"mb-0"}," Please sign-in to your account ",-1),X={class:"d-flex align-center justify-space-between flex-wrap mt-1 mb-4"},Y=r("span",null,"New on our System?",-1);const ee={class:"text-h6 font-weight-semibold text-error"},ke={__name:"login",setup(te){const m=N(),o=h({username:"",password:"",remember:!0,loginError:""}),w=D(),x=R(()=>w.global.name.value==="light"?T:P),i=h(!1);let v=window.location.protocol+"//"+window.location.hostname+":8080",d=!1;const V=async()=>{try{d=!0;const s=await L.post(v+"/api/v1/user/login",{username:o.value.username,password:o.value.password});console.log(s.data),j.set("Authorization",s.data.authorization,"7d"),s.data.twoFactorEnabled?m.push("/twoFactorVerify"):m.push("/"),d=!1}catch(s){console.error("Login failed:",s),s.response.status==500?o.value.loginError=s.response.data.errors:s.response.status==400?o.value.loginError=s.response.data.message:o.value.loginError="Incorrect Login Information",d=!1}},k=()=>{m.push("/forgotPassword")};return(s,a)=>{const y=U("RouterLink");return g(),F("div",q,[e(H,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:t(()=>[e(A,{class:"justify-center"},{prepend:t(()=>[r("div",G,[r("div",{innerHTML:n(C)},null,8,J)])]),default:t(()=>[e(Q,{class:"font-weight-semibold text-2xl text-uppercase"},{default:t(()=>[c(" PExam System ")]),_:1})]),_:1}),e(_,{class:"pt-2"},{default:t(()=>[K,O]),_:1}),e(_,null,{default:t(()=>[e(W,{onSubmit:a[4]||(a[4]=()=>{s.preventDefault(),V()})},{default:t(()=>[e(Z,null,{default:t(()=>[e(u,{cols:"12"},{default:t(()=>[e(b,{modelValue:o.value.username,"onUpdate:modelValue":a[0]||(a[0]=l=>o.value.username=l),label:"username",type:"text"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:t(()=>[e(b,{modelValue:o.value.password,"onUpdate:modelValue":a[1]||(a[1]=l=>o.value.password=l),label:"Password",placeholder:"············",type:i.value?"text":"password","append-inner-icon":i.value?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":a[2]||(a[2]=l=>i.value=!i.value)},null,8,["modelValue","type","append-inner-icon"]),r("div",X,[e($,{modelValue:o.value.remember,"onUpdate:modelValue":a[3]||(a[3]=l=>o.value.remember=l),label:"Remember me"},null,8,["modelValue"]),r("a",{class:"ms-2 mb-1",to:"/forgotPassword",onClick:k}," Forgot Password? ")]),e(I,{block:"",type:"submit",to:"/login",onClick:V},{default:t(()=>[c(" Login ")]),_:1})]),_:1}),n(d)?(g(),M(z,{key:0,indeterminate:"",color:"blue",size:"24",style:{position:"absolute","inset-block-start":"50%","inset-inline-start":"50%",transform:"translate(-50%, -50%)"}})):p("",!0),e(u,{cols:"12",class:"text-center text-base"},{default:t(()=>[Y,e(y,{class:"text-primary ms-2",to:"/register"},{default:t(()=>[c(" Create an account ")]),_:1})]),_:1}),p("",!0),e(u,{cols:"12",class:"text-center"},{default:t(()=>[r("p",ee,S(o.value.loginError),1)]),_:1}),p("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{class:"auth-footer-start-tree d-none d-md-block",src:n(B),width:250},null,8,["src"]),e(f,{src:n(E),class:"auth-footer-end-tree d-none d-md-block",width:350},null,8,["src"]),e(f,{class:"auth-footer-mask d-none d-md-block",src:n(x)},null,8,["src"])])}}};export{ke as default};
