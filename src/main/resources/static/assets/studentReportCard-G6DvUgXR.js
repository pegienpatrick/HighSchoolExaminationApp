import{a as C}from"./axios-G2rPRu76.js";import{_ as k,X as x,r as m,ag as A,e as D,w as t,a5 as B,Y as y,o as w,b as e,B as d,c as U,a as l,t as _,a2 as z,V as E,Z as S}from"./index-WVhmkmZF.js";import{V as i,a as o}from"./VRow-qsllNqOU.js";import{a as v,b as F,V}from"./VCard-TLPCC7Wu.js";import{V as O}from"./VAlert-fT0EGD2F.js";import{V as T}from"./VContainer-yEJFSNcr.js";/* empty css              */import"./VAvatar-9kArmvpM.js";import"./VImg-lYzg05eL.js";x();const I={setup(){const r=m({}),c=m(""),f=m(""),a=m({data:"google.com",title:""});m(null);const p=x(),h=()=>{const N=window.location.protocol+"//"+window.location.hostname+":8080";c.value=p.currentRoute.value.query.admNo,f.value=p.currentRoute.value.query.examinationId,C.get(N+`/api/v1/student/viewStudent/${c.value}`,{headers:{Authorization:y.get("Authorization")}}).then(n=>{r.value=n.data.body;const u=new Date(r.value.dateOfBirth),g=String(u.getDate()).padStart(2,"0"),s=String(u.getMonth()+1).padStart(2,"0"),R=u.getFullYear();r.value.dateOfBirth=`${g}-${s}-${R}`}).catch(n=>{console.error("Error fetching student details:",n),n.response&&(n.response.status===401||n.response.status===403)&&window.open("/login","_blank")})},b=()=>{const n=window.location.protocol+"//"+window.location.hostname+":8080"+`/api/v1/reportCard/viewReportCard/${f.value}/${c.value}`;C.get(n,{responseType:"blob",headers:{Authorization:y.get("Authorization")}}).then(u=>{const g=new Blob([u.data],{type:"application/pdf"}),s=document.createElement("a");s.href=URL.createObjectURL(g),s.download=r.admNo+r.name+f+" Report Card.pdf",document.body.appendChild(s),document.body.removeChild(s),a.value.data=s.href,a.value.title=s.download}).catch(u=>{console.error("Error fetching PDF:",u)})};return A(()=>{h(),b()}),{studentDetails:r,admNo:c,examinationId:f,pdfUrl:a,fetchStudentDetails:h,loadPdf:b}}},q={key:0},L=l("strong",null,"Admission Number:",-1),M=l("strong",null,"Admission Number:",-1),P=l("strong",null,"Surname:",-1),Y=l("strong",null,"First Name:",-1),$=l("strong",null,"Other Name:",-1),j=["src","title"];function X(r,c,f,a,p,h){return w(),D(B,null,{default:t(()=>[e(T,null,{default:t(()=>[e(i,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(v,{elevation:"3"},{default:t(()=>[e(F,{class:"text-h6 font-weight-bold"},{default:t(()=>[d("Student Report Card")]),_:1}),e(V,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(v,{title:"Student Details"},{default:t(()=>[e(V,{class:"d-flex"},{default:t(()=>[a.studentDetails==null?(w(),U("div",q,[e(i,{class:"w-100 d-block"},{default:t(()=>[e(o,null,{default:t(()=>[e(o,null,{default:t(()=>[l("p",null,[L,d(" "+_(this.admNo),1)])]),_:1})]),_:1})]),_:1}),e(i,{class:"w-100 d-block"},{default:t(()=>[e(o,null,{default:t(()=>[e(O,null,{default:t(()=>[d(" Record Not Found ")]),_:1})]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(o,null,{default:t(()=>[e(z,{to:"/searchStudent"},{default:t(()=>[e(E,{icon:"ri-restart-line"}),d(" Search Again ")]),_:1})]),_:1})]),_:1})])):S("",!0),a.studentDetails!=null?(w(),D(i,{key:1},{default:t(()=>[e(o,{md:"6",cols:"12"},{default:t(()=>[l("p",null,[M,d(" "+_(a.studentDetails.admNo),1)])]),_:1}),e(o,{md:"6",cols:"12"},{default:t(()=>[l("p",null,[P,d(" "+_(a.studentDetails.surname),1)])]),_:1}),e(o,{md:"6",cols:"12"},{default:t(()=>[l("p",null,[Y,d(" "+_(a.studentDetails.firstName),1)])]),_:1}),e(o,{md:"6",cols:"12"},{default:t(()=>[l("p",null,[$,d(" "+_(a.studentDetails.otherName),1)])]),_:1})]),_:1})):S("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(o,null,{default:t(()=>[e(v,null,{default:t(()=>[e(V,null,{default:t(()=>[l("iframe",{src:a.pdfUrl.data,width:"100%",height:"1000",frameborder:"0",title:a.pdfUrl.title},null,8,j)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const at=k(I,[["render",X]]);export{at as default};
