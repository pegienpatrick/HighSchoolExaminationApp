import{a as v}from"./axios-G2rPRu76.js";import{X as R,r as C,o as _,c as g,b as o,w as d,a2 as m,u as n,B as V,a as t,F as E,a4 as U,t as r,Y as N,l as S}from"./index-zYAuA0qV.js";import{a as i,V as T}from"./VRow-7mHl22X1.js";import{V as B}from"./VDialog-3VbpmMDW.js";import{a as z,b as $}from"./VCard-Mp1410Mc.js";import{V as h}from"./VTextField-JQu1_MM5.js";import{V as F}from"./VSelect-4nlBnCuk.js";import{V as I}from"./VTable-tqJF_m3V.js";const O=t("i",{class:"ri-add-circle-line"},null,-1),H={class:"d-flex justify-end"},q=["v-if"],L=t("tr",null,[t("th",null," Id "),t("th",null," fullname "),t("th",null," gender "),t("th",null," phone "),t("th",null," email "),t("th",null," relationship "),t("th",null," edit "),t("th",null," remove ")],-1),M=t("i",{class:"ri-edit-line"},null,-1),ee={__name:"GuardiansForm",setup(D){let s=R().currentRoute.value.query.admNo;const e=C({showForm:!1,admNo:s,fullName:"",idNo:"",gender:"",phone:"",email:"",relationship:"",editing:!1,num:""}),w=()=>{e.value.showForm=!1},G=()=>{e.value.showForm=!0};let p=window.location.protocol+"//"+window.location.hostname+":8080";const f=C({data:[]}),c=()=>{v.get(p+`/api/v1/guardian/viewStudentGuardians/${s}`,{headers:{Authorization:N.get("Authorization")}}).then(u=>{console.log(u),f.value.data=u.data})};c();const b=()=>{e.value.admNo=s;let u=p+"/api/v1/guardian/addGuardian";e.value.editing==!0&&(u=p+`/api/v1/guardian/updateGuardian/${e.value.num}`),v[e.value.editing==!0?"put":"post"](u,e.value,{headers:{Authorization:N.get("Authorization")}}).then(a=>{console.log(a),f.value.data=a.data,c(),w(),e.value={editing:!1,showForm:!1,admNo:s}}).catch(a=>{console.log(a),alert("error : "+a.response.data)})},k=u=>{console.log(u),e.value=u,e.value.editing=!0,e.admNo=s,console.log(e.value),G()},y=u=>{console.log(u),confirm("Are you sure you want to delete?")&&v.get(p+`/api/v1/guardian/deleteGuardian/${u.num}`,{headers:{Authorization:N.get("Authorization")}}).then(a=>{c()})};return(u,a)=>{const A=S("VCardBody");return _(),g("div",null,[o(T,null,{default:d(()=>[o(i,null,{default:d(()=>[o(m,{onClick:a[0]||(a[0]=l=>{e.value={},n(e).showForm=!0,n(e).editing=!1}),color:"primary",class:"m-auto d-block"},{default:d(()=>[O,V(" Add Guardian ")]),_:1})]),_:1}),o(B,{modelValue:n(e).showForm,"onUpdate:modelValue":a[7]||(a[7]=l=>n(e).showForm=l),"max-width":"500px"},{default:d(()=>[o(z,null,{default:d(()=>[o($,null,{default:d(()=>[V("Add Guardian")]),_:1}),o(A,{class:"p-3"},{default:d(()=>[o(i,null,{default:d(()=>[o(h,{modelValue:n(e).fullName,"onUpdate:modelValue":a[1]||(a[1]=l=>n(e).fullName=l),label:"Guardian Name"},null,8,["modelValue"])]),_:1}),o(i,null,{default:d(()=>[o(h,{modelValue:n(e).idNo,"onUpdate:modelValue":a[2]||(a[2]=l=>n(e).idNo=l),label:"Guardian Id"},null,8,["modelValue"])]),_:1}),o(i,null,{default:d(()=>[o(h,{modelValue:n(e).email,"onUpdate:modelValue":a[3]||(a[3]=l=>n(e).email=l),label:"Guardian Email",type:"email"},null,8,["modelValue"])]),_:1}),o(i,null,{default:d(()=>[o(h,{modelValue:n(e).phone,"onUpdate:modelValue":a[4]||(a[4]=l=>n(e).phone=l),label:"Guardian Phone",type:"tel"},null,8,["modelValue"])]),_:1}),o(i,null,{default:d(()=>[o(F,{modelValue:n(e).gender,"onUpdate:modelValue":a[5]||(a[5]=l=>n(e).gender=l),label:"Gender",items:["MALE","FEMALE","OTHER"],placeholder:"Select Gender",required:""},null,8,["modelValue"])]),_:1}),o(i,null,{default:d(()=>[o(F,{modelValue:n(e).relationship,"onUpdate:modelValue":a[6]||(a[6]=l=>n(e).relationship=l),label:"Relationship",items:["FATHER","MOTHER","SPONSOR","OTHER"],placeholder:"Select Relationship",required:""},null,8,["modelValue"])]),_:1}),t("div",H,[o(m,{onClick:b},{default:d(()=>[V("Submit")]),_:1}),o(m,{onClick:w},{default:d(()=>[V("Cancel")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(I,null,{default:d(()=>[t("tbody",{"v-if":n(f).data!=null},[L,(_(!0),g(E,null,U(n(f).data,l=>(_(),g("tr",{key:l.num},[t("td",null,r(l.idNo),1),t("td",null,r(l.fullName),1),t("td",null,r(l.gender),1),t("td",null,r(l.phone),1),t("td",null,r(l.email),1),t("td",null,r(l.relationship),1),t("td",null,[o(m,{text:"edit",icon:"ri-edit-line",onClick:x=>k(l)},{default:d(()=>[M]),_:2},1032,["onClick"])]),t("td",null,[o(m,{text:"delete",onClick:x=>y(l),icon:"ri-close-line",color:"danger"},null,8,["onClick"])])]))),128))],8,q)]),_:1})])}}};export{ee as _};
