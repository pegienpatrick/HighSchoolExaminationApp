import{a as N}from"./axios-G2rPRu76.js";import{_ as A,X as U,r as _,af as B,e as C,w as t,a5 as z,Y as y,o as g,b as e,B as n,c as E,a as o,t as m,a2 as x,V as S,Z as R}from"./index-da36zxQg.js";import{V as i,a as l}from"./VRow-ML7Wed7t.js";import{a as v,b as F,V as b}from"./VCard-2WKBUKTx.js";import{V as O}from"./VAlert-tzT-Vqe7.js";import{V as T}from"./VContainer-Y-iJUtbW.js";/* empty css              */import"./VAvatar-tNbxmyAy.js";import"./VImg-M6_-POrR.js";U();const I={setup(){const r=_({}),c=_(""),f=_(""),a=_({data:"",title:""});_(null);const p=U(),h=()=>{const D=window.location.protocol+"//"+window.location.hostname+":8080";c.value=p.currentRoute.value.query.admNo,f.value=p.currentRoute.value.query.examinationId,N.get(D+`/api/v1/student/viewStudent/${c.value}`,{headers:{Authorization:y.get("Authorization")}}).then(d=>{r.value=d.data.body;const u=new Date(r.value.dateOfBirth),w=String(u.getDate()).padStart(2,"0"),s=String(u.getMonth()+1).padStart(2,"0"),k=u.getFullYear();r.value.dateOfBirth=`${w}-${s}-${k}`}).catch(d=>{console.error("Error fetching student details:",d),d.response&&(d.response.status===401||d.response.status===403)&&window.open("/login","_blank")})},V=()=>{const d=window.location.protocol+"//"+window.location.hostname+":8080"+`/api/v1/reportCard/viewReportCard/${f.value}/${c.value}`;N.get(d,{responseType:"blob",headers:{Authorization:y.get("Authorization")}}).then(u=>{const w=new Blob([u.data],{type:"application/pdf"}),s=document.createElement("a");s.href=URL.createObjectURL(w),s.download=r.value.admNo+r.value.name+f+" Report Card.pdf",document.body.appendChild(s),document.body.removeChild(s),a.value.data=s.href,a.value.title=s.download}).catch(u=>{console.error("Error fetching PDF:",u)})};return B(()=>{h(),V()}),{studentDetails:r,admNo:c,examinationId:f,pdfUrl:a,fetchStudentDetails:h,loadPdf:V}}},q={key:0},L=o("strong",null,"Admission Number:",-1),M=o("strong",null,"Admission Number:",-1),P=o("strong",null,"Surname:",-1),Y=o("strong",null,"First Name:",-1),j=o("strong",null,"Other Name:",-1),X=["download","href"],Z=["src","title"];function G(r,c,f,a,p,h){return g(),C(z,null,{default:t(()=>[e(T,null,{default:t(()=>[e(i,null,{default:t(()=>[e(l,{cols:"12"},{default:t(()=>[e(v,{elevation:"3"},{default:t(()=>[e(F,{class:"text-h6 font-weight-bold"},{default:t(()=>[n("Student Report Card")]),_:1}),e(b,null,{default:t(()=>[e(l,{cols:"12"},{default:t(()=>[e(v,{title:"Student Details"},{default:t(()=>[e(b,{class:"d-flex"},{default:t(()=>[a.studentDetails==null?(g(),E("div",q,[e(i,{class:"w-100 d-block"},{default:t(()=>[e(l,null,{default:t(()=>[e(l,null,{default:t(()=>[o("p",null,[L,n(" "+m(this.admNo),1)])]),_:1})]),_:1})]),_:1}),e(i,{class:"w-100 d-block"},{default:t(()=>[e(l,null,{default:t(()=>[e(O,null,{default:t(()=>[n(" Record Not Found ")]),_:1})]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(l,null,{default:t(()=>[e(x,{to:"/searchStudent"},{default:t(()=>[e(S,{icon:"ri-restart-line"}),n(" Search Again ")]),_:1})]),_:1})]),_:1})])):R("",!0),a.studentDetails!=null?(g(),C(i,{key:1},{default:t(()=>[e(l,{md:"6",cols:"12"},{default:t(()=>[o("p",null,[M,n(" "+m(a.studentDetails.admNo),1)])]),_:1}),e(l,{md:"6",cols:"12"},{default:t(()=>[o("p",null,[P,n(" "+m(a.studentDetails.surname),1)])]),_:1}),e(l,{md:"6",cols:"12"},{default:t(()=>[o("p",null,[Y,n(" "+m(a.studentDetails.firstName),1)])]),_:1}),e(l,{md:"6",cols:"12"},{default:t(()=>[o("p",null,[j,n(" "+m(a.studentDetails.otherName),1)])]),_:1})]),_:1})):R("",!0)]),_:1}),o("a",{class:"btn btn-primary",color:"success",download:a.pdfUrl.title,href:a.pdfUrl.data},[e(x,{text:"Download"},{default:t(()=>[n(" Download _ "),e(S,{icon:"ri-download-line"})]),_:1})],8,X)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(l,null,{default:t(()=>[e(v,null,{default:t(()=>[e(b,null,{default:t(()=>[o("iframe",{src:a.pdfUrl.data,width:"100%",height:"1000",frameborder:"0",title:a.pdfUrl.title},null,8,Z)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const ot=A(I,[["render",G]]);export{ot as default};
