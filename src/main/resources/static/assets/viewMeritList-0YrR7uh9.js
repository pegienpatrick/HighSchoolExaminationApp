import{a as v}from"./axios-G2rPRu76.js";import{_ as M,X as y,r as V,Y as h,c as C,b as s,w as n,o as R,u as r,a2 as x}from"./index--uHrWztf.js";import{V as j,a as A}from"./VRow-C1Q3znKN.js";import{V as N}from"./VSelect-EssjzhX8.js";import{V as B}from"./VTextField-YveBRxC6.js";import{V as z}from"./VDataTable-_V6xC0V4.js";/* empty css              */import"./form-gRAo9SrI.js";import"./forwardRefs-y8pOSn8h.js";import"./VMenu-Fh5_tsfm.js";import"./index-EqZBXuIc.js";import"./ssrBoot-YvMPSAVD.js";import"./VImg-T1wKAj7l.js";import"./VAvatar-UovGB6ZZ.js";import"./VDivider-rjHNxqrv.js";import"./VOverlay-Ko1djXxg.js";import"./easing-imumzmxr.js";import"./lazy-sG_msKxB.js";import"./VCheckboxBtn-k6b5wbXb.js";import"./VField-A8xS_5ao.js";import"./VChip-0IljYP5g.js";import"./VTable-ZP4PhMxV.js";const G={__name:"viewMeritList",setup(L){const g=y(),e=V({data:[],headers:[],search:""});let d=window.location.protocol+"//"+window.location.hostname+":8080",f=g.currentRoute.value.query.exam,b=g.currentRoute.value.query.stage,k=[],m=[],c=[],p=[],S=[];const o=new Map;v.get(d+"/api/v1/subjectSelection/availableSubjects",{headers:{Authorization:h.get("Authorization")}}).then(t=>{console.log(t),S=t.data,S.forEach(a=>{o.set(a.subjectCode,{subjectName:a.subjectName,subjectRep:a.subjectRep})}),console.log(o),console.log(o.get(101))}),v.get(d+`/api/v1/meritList/viewMerit/${f}/${b}`,{headers:{"Content-Type":"application/json",Authorization:h.get("Authorization")}}).then(t=>{console.log(t);let a=t.data;k=a,e.value.data=a,e.value.headers=[{title:"Overall Pos",value:"classRank",key:"classRank"},{title:"Stream",value:"stream",key:"stream"},{title:"Stream Pos",value:"streamRank",key:"streamRank"},{title:"Adm No",value:"admNo",key:"admNo"},{title:"Student Name",value:"studentName",key:"studentName"}],o.forEach((i,u)=>{e.value.headers.push({title:o.get(u).subjectRep,value:"subjectMarks."+u,key:"subjectMarks."+u}),e.value.headers.push({title:"G",value:"subjectGrades."+u,key:"subjectGrades."+u})}),e.value.headers.push({title:"Aggr Points",value:"points",key:"points"}),e.value.headers.push({title:"Aggr Grade",value:"aggregateGrade",key:"aggregateGrade"}),e.value.headers.push({title:"Entry Marks",value:"kcpeMarks",key:"kcpeMarks"}),console.log(e.value.headers)}).catch(t=>{console.log(t),(t.response&&t.response.status===401||t.response.status===403)&&window.open("/login","_blank")});let w="";const l=V({selectedStream:"All"}),_=()=>{if(e.value.data=[],l.value.selectedStream=="All"){e.value.data=k;return}if(l.value.selectedStream=="A"&&m.length>0){e.value.data=m;return}if(l.value.selectedStream=="B"&&c.length>0){e.value.data=c;return}if(l.value.selectedStream=="C"&&p.length>0){e.value.data=p;return}v.get(d+`/api/v1/meritList/viewMerit/${f}/${b}?stream=${l.value.selectedStream}`,{headers:{"Content-Type":"application/json",Authorization:h.get("Authorization")}}).then(t=>{e.value.data=t.data,l.value.selectedStream=="A"&&(m=t.data),l.value.selectedStream=="B"&&(c=t.data),l.value.selectedStream=="C"&&(p=t.data)})};return(t,a)=>(R(),C("div",null,[s(j,null,{default:n(()=>[s(A,null,{default:n(()=>[s(N,{label:"Select Stream ",items:["All","A","B","C"],modelValue:r(l).selectedStream,"onUpdate:modelValue":a[0]||(a[0]=i=>r(l).selectedStream=i)},null,8,["modelValue"])]),_:1}),s(A,null,{default:n(()=>[s(x,{text:"Fetch Stream MeritList",onClick:_})]),_:1})]),_:1}),s(j,null,{default:n(()=>[s(B,{modelValue:r(e).search,"onUpdate:modelValue":a[1]||(a[1]=i=>r(e).search=i),label:"Search",onInput:r(w)},null,8,["modelValue","onInput"]),s(z,{items:r(e).data,class:"elevation-1 custom-table",striped:"",search:r(e).search,headers:r(e).headers},null,8,["items","search","headers"])]),_:1})]))}},se=M(G,[["__scopeId","data-v-c7227b64"]]);export{se as default};
