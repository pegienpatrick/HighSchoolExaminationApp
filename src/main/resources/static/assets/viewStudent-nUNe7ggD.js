import{a as _}from"./axios-G2rPRu76.js";import{_ as V,Y as f,e as h,w as e,a5 as b,o as m,b as t,a as o,B as s,c as k,t as i,a2 as p,V as B,Z as g,l as y}from"./index-SGO5OOPy.js";import{s as v}from"./sweetalert2.all-LOn_dB4H.js";import{_ as A}from"./GuardiansForm-BnEDmlnv.js";import{V as d,a as l}from"./VRow-SKQ4CCOT.js";import{a as D,b as N,V as S}from"./VCard-iwGy2QZm.js";import{V as x}from"./VAvatar-aQ_KeIL1.js";import{V as F}from"./VAlert-rCG5zR39.js";import{V as z}from"./VContainer-_38cnXxu.js";import"./VDialog-qZy5oQNk.js";import"./VOverlay-sta7PfT3.js";import"./easing-Apq16fr0.js";import"./lazy-Dwtquv-K.js";import"./VImg-nJ6DsKWr.js";import"./forwardRefs-y8pOSn8h.js";import"./dialog-transition-H9M13_Jl.js";import"./VTextField-zjRFJMH_.js";import"./VField-JCquXGl7.js";import"./index-vWDdzW97.js";import"./form-syYsj1LP.js";import"./VSelect-XRxo3SYo.js";import"./VMenu-Jk-FC-iD.js";import"./ssrBoot-dRiIKdbQ.js";import"./VDivider-J_lD5GQp.js";import"./VCheckboxBtn-N82T6j1u.js";import"./VChip-AExESlP7.js";import"./VTable-GWFtDMSE.js";/* empty css              */const I={components:{GuardianForm:A},data(){return{studentDetails:{},admNo:"",avatarImg:""}},mounted(){this.fetchStudentDetails(),console.log("mounted"),this.fetchStudentDetails()},methods:{fetchStudentDetails(){const r=window.location.protocol+"//"+window.location.hostname+":8080";this.admNo=this.$route.query.admNo,_.get(r+`/api/v1/student/viewStudent/${this.admNo}`,{headers:{Authorization:f.get("Authorization")}}).then(a=>{console.log(a),this.studentDetails=a.data.body,console.log(this.studentDetails);const u=new Date(this.studentDetails.dateOfBirth),w=String(u.getDate()).padStart(2,"0"),n=String(u.getMonth()+1).padStart(2,"0"),c=u.getFullYear();this.studentDetails.dateOfBirth=`${w}-${n}-${c}`}).catch(a=>{console.error("Error fetching student details:",a),console.log(a),a.response&&(a.response.status===401||a.response.status===403)&&window.open("/login","_blank")}),_.get(r+`/api/v1/studentPhoto/getStudentPhoto/${this.admNo}`,{responseType:"blob",headers:{Authorization:f.get("Authorization")}}).then(a=>{const u=new Blob([a.data],{type:"application/png"});this.avatarImg=URL.createObjectURL(u)})},editStudent(){this.$router.push(`/editStudent?admNo=${this.studentDetails.admNo}`)},deleteStudent(){v.fire({title:"Delete Student",text:"Are you sure you want to delete this student?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(r=>{if(r.isConfirmed){const a=window.location.protocol+"//"+window.location.hostname+":8080";_.get(a+`/api/v1/student/deleteStudent/${this.admNo}`,{headers:{Authorization:f.get("Authorization")}}).then(u=>{console.log(u),this.$router.push("/students")})}})}}},G={class:"w-100 d-block align-center"},O={key:0},T=o("strong",null,"Admission Number:",-1),E=o("strong",null,"Admission Number:",-1),M=o("strong",null,"Surname:",-1),R=o("strong",null,"First Name:",-1),U=o("strong",null,"Other Name:",-1),P=o("strong",null,"Date of Birth:",-1),Y=o("strong",null,"Gender:",-1),j=o("strong",null,"Birth Certificate Number:",-1),L=o("strong",null,"IFMIS Number:",-1),q=o("strong",null,"Stage (Form):",-1),K=o("strong",null,"Stream:",-1),Z=o("strong",null,"KCPE Marks:",-1),H=o("strong",null,"Cohort:",-1);function J(r,a,u,w,n,c){const C=y("GuardianForm");return m(),h(b,null,{default:e(()=>[t(z,null,{default:e(()=>[t(d,null,{default:e(()=>[t(l,{cols:"12"},{default:e(()=>[t(D,{elevation:"3"},{default:e(()=>[o("div",G,[t(x,{image:n.avatarImg,size:"200",class:"d-block"},null,8,["image"])]),t(N,{class:"text-h6 font-weight-bold"},{default:e(()=>[s("Student Details")]),_:1}),t(S,null,{default:e(()=>[t(l,{cols:"12"},{default:e(()=>[t(D,{title:"Student Details"},{default:e(()=>[t(S,{class:"d-flex"},{default:e(()=>[n.studentDetails==null?(m(),k("div",O,[t(d,{class:"w-100 d-block"},{default:e(()=>[t(l,null,{default:e(()=>[t(l,null,{default:e(()=>[o("p",null,[T,s(" "+i(this.admNo),1)])]),_:1})]),_:1})]),_:1}),t(d,{class:"w-100 d-block"},{default:e(()=>[t(l,null,{default:e(()=>[t(F,null,{default:e(()=>[s(" Record Not Found ")]),_:1})]),_:1})]),_:1}),t(d,null,{default:e(()=>[t(l,null,{default:e(()=>[t(p,{to:"/searchStudent"},{default:e(()=>[t(B,{icon:"ri-restart-line"}),s(" Search Again ")]),_:1})]),_:1})]),_:1})])):g("",!0),n.studentDetails!=null?(m(),h(d,{key:1},{default:e(()=>[t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[E,s(" "+i(n.studentDetails.admNo),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[M,s(" "+i(n.studentDetails.surname),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[R,s(" "+i(n.studentDetails.firstName),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[U,s(" "+i(n.studentDetails.otherName),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[P,s(" "+i(n.studentDetails.dateOfBirth),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[Y,s(" "+i(n.studentDetails.gender),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[j,s(" "+i(n.studentDetails.birthCertno),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[L,s(" "+i(n.studentDetails.ifmisNo),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[q,s(" "+i(n.studentDetails.stage),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[K,s(" "+i(n.studentDetails.stream),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[Z,s(" "+i(n.studentDetails.kcpeMarks),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[H,s(" "+i(n.studentDetails.cohort),1)])]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1})]),_:1}),n.studentDetails!=null?(m(),h(d,{key:0,justify:"center"},{default:e(()=>[t(l,null,{default:e(()=>[t(p,{onClick:c.editStudent,color:"primary"},{default:e(()=>[s("Edit Student")]),_:1},8,["onClick"])]),_:1}),t(l),t(l,null,{default:e(()=>[t(p,{onClick:c.deleteStudent,color:"warning"},{default:e(()=>[s("Delete Student")]),_:1},8,["onClick"])]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(d,null,{default:e(()=>[t(l,null,{default:e(()=>[t(D,null,{default:e(()=>[t(N,null,{default:e(()=>[s(" Guardians ")]),_:1}),t(S,null,{default:e(()=>[t(C)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const bt=V(I,[["render",J]]);export{bt as default};
