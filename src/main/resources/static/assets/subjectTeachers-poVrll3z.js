import{a as g}from"./axios-G2rPRu76.js";import{_ as N,X as D,r as d,Y as b,ac as E,c as w,b as l,w as o,ak as P,o as m,B as $,a2 as x,e as k,F as y,a4 as F,t as S,Z,l as q,p as G,m as H,a as U}from"./index-zYAuA0qV.js";import{V as c,a as i}from"./VRow-7mHl22X1.js";import{V as J,a as K,c as O,b as Q}from"./VMenu-AAQK7vOC.js";import{a as I,b as B,V as A}from"./VCard-Mp1410Mc.js";import{V as W}from"./VForm-8SLQ-6iH.js";import{V as Y}from"./VSelect-4nlBnCuk.js";import{V as z}from"./VTextField-JQu1_MM5.js";/* empty css              */import"./index-Dx9PTrLH.js";import"./ssrBoot-sA4uMkfL.js";import"./VImg-XJYe2yvh.js";import"./VAvatar-BX0ZOUQe.js";import"./VDivider-AOx8292S.js";import"./VOverlay-fwCDSazt.js";import"./easing-Apq16fr0.js";import"./lazy-p-tG6HZU.js";import"./forwardRefs-y8pOSn8h.js";import"./dialog-transition-BhwFHhVk.js";import"./form-5RZ1SEPf.js";import"./VCheckboxBtn-HguwSvFI.js";import"./VLabel-H24OS9-G.js";import"./VChip-LZhjDHi2.js";import"./VField-pvgEwNC3.js";const ee=f=>(G("data-v-31e71c29"),f=f(),H(),f),le=ee(()=>U("p",null,[U("strong",null,"Teachers")],-1)),ae={__name:"subjectTeachers",setup(f){D();let C=window.location.protocol+"//"+window.location.hostname+":8080";const h=d(!1),p=d({top:0,left:0});d({optionals:[],optionalsReadable:new Map}),d({data:[],filtered:[],search:""});const r=d({data:null}),v=d({grade:"1",stream:"A"});d({data:[]});const s=d({data:[],allTeachers:null,filtered:[]});g.get(C+"/api/v1/subjectTeacher/allTeachers",{headers:{Authorization:b.get("Authorization")}}).then(t=>{console.log(t),s.value.allTeachers=t.data;for(const a in s.value.allTeachers)s.value.data.push({key:a,value:a,title:s.value.allTeachers[a],text:s.value.allTeachers[a]})});const L=()=>{g.get(C+`/api/v1/subjectTeacher/viewSubjectTeachers/${v.value.grade}/${v.value.stream}`,{headers:{Authorization:b.get("Authorization")}}).then(t=>{console.log(t),r.value.data=t.data})},j=t=>{g.put(C+"/api/v1/subjectTeacher/updateSubjectTeacher",t,{headers:{Authorization:b.get("Authorization")}}).then(a=>{console.log(a),t.success=!0,window.setTimeout(()=>{t.success=null},2e3)})};E(()=>{});const u=d({searchText:"",menu:!1,positionX:0,positionY:0,subjectTeacher:{}});s.value.data;const M=(t,a)=>{a.teacher=t.value},X=(t,a)=>{const n=t.$el.getBoundingClientRect();u.value.positionX=n.left,u.value.positionY=n.top,u.value.offsetY=n.top,u.value.subjectTeacher=a,u.value.menu=!0,u.value.searchText=t.$el.value,console.log(u.value);const e=n.left,T=n.top+40;p.value={top:T,left:e},h.value=!0,console.log(p.value)},R=(t,a)=>{var n=t[0];const e=n.$el.getBoundingClientRect();u.value.positionX=e.left,u.value.positionY=e.top+window.scrollY+42,u.value.subjectTeacher=a,u.value.menu=!0,u.value.searchText=n.$el.value,console.log(u.value),p.value={top:u.value.positionY,left:u.value.positionX},h.value=!0,console.log(p.value)},V=t=>{console.log(t),s.value.filtered=[],u.value.searchText=t;for(const n in s.value.data){var a=s.value.data[n];a.title.toLowerCase().includes(t.toLowerCase())&&s.value.filtered.push(a)}};return(t,a)=>{const n=q("v-list-item-content");return m(),w("div",null,[l(c,null,{default:o(()=>[l(i,null,{default:o(()=>[l(I,null,{default:o(()=>[l(B,null,{default:o(()=>[$(" Subject Teachers ")]),_:1}),l(A,null,{default:o(()=>[l(W,null,{default:o(()=>[l(c,null,{default:o(()=>[l(i,null,{default:o(()=>[l(Y,{label:"Form (stage)",items:["1","2","3","4"],modelValue:v.value.grade,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value.grade=e)},null,8,["modelValue"])]),_:1}),l(i,null,{default:o(()=>[l(Y,{label:"Stream",items:["A","B","C"],modelValue:v.value.stream,"onUpdate:modelValue":a[1]||(a[1]=e=>v.value.stream=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(c,null,{default:o(()=>[l(x,{text:"Load Subject Teachers",class:"w-100",color:"secondary",onClick:L})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(c,null,{default:o(()=>[l(i,null,{default:o(()=>[r.value.data!=null?(m(),k(I,{key:0},{default:o(()=>[l(B,null,{default:o(()=>[le,l(c,null,{default:o(()=>[l(i,null,{default:o(()=>[l(z,{modelValue:s.value.allTeachers[r.value.data.classTeacher.teacher],"onUpdate:modelValue":a[2]||(a[2]=e=>s.value.allTeachers[r.value.data.classTeacher.teacher]=e),label:"Class Teacher",outlined:"",dense:"","solo-inverted":"",ref:"classTeacherTextField",onFocus:a[3]||(a[3]=e=>{X(t.$refs.classTeacherTextField,r.value.data.classTeacher),V(t.$refs.classTeacherTextField.value)}),clearable:"",onInput:a[4]||(a[4]=e=>V(t.$refs.classTeacherTextField.value))},null,8,["modelValue"])]),_:1})]),_:1}),l(c,null,{default:o(()=>[l(i,null,{default:o(()=>[l(x,{text:r.value.data.classTeacher.success==null?"Update Class Teacher":"Updated",color:r.value.data.classTeacher.success==null?"primary":"secondary",onClick:a[5]||(a[5]=e=>j(r.value.data.classTeacher))},null,8,["text","color"])]),_:1})]),_:1})]),_:1}),l(A,null,{default:o(()=>[(m(!0),w(y,null,F(r.value.data.subjectTeachers,(e,T)=>(m(),k(c,{key:e.subjectCode},{default:o(()=>[l(i,null,{default:o(()=>[$(S(console.log(e.teacher))+" ",1),l(z,{modelValue:s.value.allTeachers[e.teacher==null?e.subjectCode:e.teacher],"onUpdate:modelValue":_=>s.value.allTeachers[e.teacher==null?e.subjectCode:e.teacher]=_,label:T+" Teacher",outlined:"",dense:"","solo-inverted":"",ref_for:!0,ref:`subject${e.subjectCode}`,onFocus:_=>{R(t.$refs["subject"+e.subjectCode],e),V(t.$refs["subject"+e.subjectCode][0].value)},clearable:"",onInput:_=>V(t.$refs["subject"+e.subjectCode][0].value)},null,8,["modelValue","onUpdate:modelValue","label","onFocus","onInput"])]),_:2},1024),l(i,null,{default:o(()=>[l(x,{text:e.success==null?"Update":"Updated",color:e.success==null?"primary":"success",onClick:_=>j(e)},null,8,["text","color","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):Z("",!0)]),_:1})]),_:1}),l(J,{modelValue:h.value,"onUpdate:modelValue":a[6]||(a[6]=e=>h.value=e),style:P({position:"absolute",top:p.value.top+"px",left:p.value.left+"px"}),class:"w-75"},{default:o(()=>[l(K,null,{default:o(()=>[(m(!0),w(y,null,F(s.value.filtered,e=>(m(),k(Q,{key:e.title,onClick:T=>M(e,u.value.subjectTeacher)},{default:o(()=>[l(n,null,{default:o(()=>[l(O,null,{default:o(()=>[$(S(e.title),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["modelValue","style"])])}}},je=N(ae,[["__scopeId","data-v-31e71c29"]]);export{je as default};
