import{Q as Z,U as A,r as u,c as j,n as e,m as t,u as l,a as r,i as f,F,o as g,b as d,t as h,a2 as C,a4 as G,V as K,a3 as I,l as M,Z as k,k as X,a1 as H}from"./index-2BP_lAh-.js";import{l as W}from"./logo-lSNaS3Cd.js";import{a as R}from"./axios-G2rPRu76.js";import{V as Y}from"./VDialog-ZLwcZvHF.js";import{V as ee,a as te,b as le,c as $}from"./VWindowItem-ic3Cd3Gk.js";import{V,a as i}from"./VRow-xKr1Tf61.js";import{a as E,b as N,d as U,V as c}from"./VCard-LeQVuWP8.js";import{V as S}from"./VForm-N6boVIal.js";import{V as m}from"./VTextField-vshtD9Ps.js";import"./VDivider-unEwWr4n.js";import"./VOverlay-vCK72WMx.js";import"./easing-Apq16fr0.js";import"./lazy-CnP97q8J.js";import"./VImg-noq4ZFey.js";import"./forwardRefs-y8pOSn8h.js";import"./dialog-transition-zP723b51.js";import"./index-QAR5VDvd.js";import"./ssrBoot-qj21oVFS.js";/* empty css              */import"./VAvatar-nprCTEVN.js";import"./form-v140H6Iy.js";import"./VField-2KSXPk5K.js";import"./VLabel-PkvqaiGN.js";import"./VInput-fOfT7lUm.js";const se={class:"auth-wrapper d-flex align-center justify-center pa-4"},ae={class:"d-flex"},oe=["innerHTML"],ne=r("h5",{class:"text-h5 font-weight-semibold mb-1"}," Welcome to PExam System!  ",-1),re=r("p",{class:"mb-0"}," Please Enter your Username and phone to send password reset code. ",-1),ie=r("div",{class:"d-flex align-center justify-space-between flex-wrap mt-1 mb-4"},null,-1),de={class:"text-h6 font-weight-semibold text-error"},ue={class:"auth-wrapper d-flex align-center justify-center pa-4"},me={class:"d-flex"},pe=["innerHTML"],ce=r("h5",{class:"text-h5 font-weight-semibold mb-1"}," Welcome to PExam System!  ",-1),fe=r("p",{class:"mb-0"}," Please Enter your Username and email to send password reset code. ",-1),Ve=r("div",{class:"d-flex align-center justify-space-between flex-wrap mt-1 mb-4"},null,-1),be={class:"text-h6 font-weight-semibold text-error"},ze={__name:"forgotPassword",setup(we){const z=Z(),J=A(),p=u(J.params.tab),O=[{title:"Email Reset",icon:"ri-mail-fill",tab:"emailReset"},{title:"Sms Reset",icon:"ri-chat-1-fill",tab:"smsReset"}];let P=window.location.protocol+"//"+window.location.hostname+":8080";const q=[o=>!!o||"Phone number is required",o=>/^\d+$/.test(o)||"Phone number should only contain digits",o=>o.length===10||"Phone number should be 10 digits"],n=u({username:"",email:"",phone:"",smsError:"",emailError:"",success:!1,msg:""});let T=!1;const b=u(!1),w=u(!1),_=u(!1),v=u(""),x=u(""),y=u(""),B=()=>{R.post(P+"/api/v1/user/emailForgotPassword",n.value).then(o=>{console.log(o),n.value.emailError="",n.value.success=!0,n.value.msg=o.data}).catch(o=>{console.log(o),n.value.emailError=JSON.stringify(o.response.data)})},L=()=>{R.post(P+"/api/v1/user/smsForgotPassword",n.value).then(o=>{console.log(o),n.value.smsError="",n.value.success=!0,n.value.msg=o.data}).catch(o=>{console.log(o),n.value.smsError=JSON.stringify(o.response.data)})},Q=()=>{R.post(P+"/api/v1/user/passwordReset",{username:n.value.username,resetCode:v.value,newPassword:x.value,confirmPassword:y.value}).then(o=>{console.log(o),alert(o.data),z.push("/login")}).catch(o=>{console.log(o),alert(JSON.stringify(o.response.data))})};return(o,s)=>{const D=X("RouterLink");return g(),j(F,null,[e(Y,{modelValue:l(n).success,"onUpdate:modelValue":s[6]||(s[6]=a=>l(n).success=a)},{default:t(()=>[e(V,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(E,null,{default:t(()=>[e(N,null,{default:t(()=>[d(" Reset Password ")]),_:1}),e(S,null,{default:t(()=>[e(U,null,{default:t(()=>[r("p",null,h(l(n).msg),1)]),_:1}),e(c,null,{default:t(()=>[e(V,{class:"mb-3"},{default:t(()=>[e(i,{cols:"12",md:"6"},{default:t(()=>[e(m,{modelValue:l(v),"onUpdate:modelValue":s[0]||(s[0]=a=>f(v)?v.value=a:null),type:l(b)?"text":"password","append-inner-icon":l(b)?"ri-eye-off-line":"ri-eye-line",autocomplete:"on",label:"Password Reset Code",placeholder:" 0 0 0 0 0 0 ","onClick:appendInner":s[1]||(s[1]=a=>b.value=!l(b))},null,8,["modelValue","type","append-inner-icon"])]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(i,{cols:"12",md:"6"},{default:t(()=>[e(m,{modelValue:l(x),"onUpdate:modelValue":s[2]||(s[2]=a=>f(x)?x.value=a:null),type:l(w)?"text":"password","append-inner-icon":l(w)?"ri-eye-off-line":"ri-eye-line",label:"New Password",autocomplete:"on",placeholder:"路路路路路路路路路路路路","onClick:appendInner":s[3]||(s[3]=a=>w.value=!l(w))},null,8,["modelValue","type","append-inner-icon"])]),_:1}),e(i,{cols:"12",md:"6"},{default:t(()=>[e(m,{modelValue:l(y),"onUpdate:modelValue":s[4]||(s[4]=a=>f(y)?y.value=a:null),type:l(_)?"text":"password","append-inner-icon":l(_)?"ri-eye-off-line":"ri-eye-line",autocomplete:"on",label:"Confirm New Password",placeholder:"路路路路路路路路路路路路","onClick:appendInner":s[5]||(s[5]=a=>_.value=!l(_))},null,8,["modelValue","type","append-inner-icon"])]),_:1})]),_:1})]),_:1}),e(c,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(C,{onClick:Q},{default:t(()=>[d("Reset Password")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r("div",null,[e(ee,{modelValue:l(p),"onUpdate:modelValue":s[7]||(s[7]=a=>f(p)?p.value=a:null),"show-arrows":""},{default:t(()=>[(g(),j(F,null,G(O,a=>e(le,{key:a.icon,value:a.tab},{default:t(()=>[e(K,{size:"20",start:"",icon:a.icon},null,8,["icon"]),d(" "+h(a.title),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),e(te,{modelValue:l(p),"onUpdate:modelValue":s[14]||(s[14]=a=>f(p)?p.value=a:null),class:"mt-5 disable-tab-transition",touch:!1},{default:t(()=>[e($,{value:"emailReset"},{default:t(()=>[r("div",se,[e(E,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:t(()=>[e(U,{class:"justify-center"},{prepend:t(()=>[r("div",ae,[r("div",{innerHTML:l(W)},null,8,oe)])]),default:t(()=>[e(N,{class:"font-weight-semibold text-2xl text-uppercase"},{default:t(()=>[d(" PExam System ")]),_:1})]),_:1}),e(c,{class:"pt-2"},{default:t(()=>[ne,re]),_:1}),e(c,null,{default:t(()=>[e(S,{onSubmit:s[10]||(s[10]=()=>(o.preventDefault(),B(),!1))},{default:t(()=>[e(V,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(m,{modelValue:l(n).username,"onUpdate:modelValue":s[8]||(s[8]=a=>l(n).username=a),label:"username",type:"text"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(m,{type:"email",modelValue:l(n).email,"onUpdate:modelValue":s[9]||(s[9]=a=>l(n).email=a),mask:"email",label:"Enter Email"},null,8,["modelValue"]),ie,e(C,{block:"",type:"submit",onClick:I(B,["prevent"])},{default:t(()=>[d(" Send Reset Code ")]),_:1})]),_:1}),l(T)?(g(),M(H,{key:0,indeterminate:"",color:"blue",size:"24",style:{position:"absolute","inset-block-start":"50%","inset-inline-start":"50%",transform:"translate(-50%, -50%)"}})):k("",!0),e(i,{cols:"12",class:"text-center text-base"},{default:t(()=>[e(D,{class:"text-primary ms-2",to:"/login"},{default:t(()=>[d(" Back To Login ")]),_:1})]),_:1}),k("",!0),e(i,{cols:"12",class:"text-center"},{default:t(()=>[r("p",de,h(l(n).emailError),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),e($,{value:"smsReset"},{default:t(()=>[r("div",ue,[e(E,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:t(()=>[e(U,{class:"justify-center"},{prepend:t(()=>[r("div",me,[r("div",{innerHTML:l(W)},null,8,pe)])]),default:t(()=>[e(N,{class:"font-weight-semibold text-2xl text-uppercase"},{default:t(()=>[d(" PExam System ")]),_:1})]),_:1}),e(c,{class:"pt-2"},{default:t(()=>[ce,fe]),_:1}),e(c,null,{default:t(()=>[e(S,{onSubmit:s[13]||(s[13]=()=>(o.preventDefault(),L(),!1))},{default:t(()=>[e(V,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(m,{modelValue:l(n).username,"onUpdate:modelValue":s[11]||(s[11]=a=>l(n).username=a),label:"username",type:"text"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(m,{type:"tel",rules:q,mask:"phone",label:"Phone Number",modelValue:l(n).phone,"onUpdate:modelValue":s[12]||(s[12]=a=>l(n).phone=a)},null,8,["modelValue"]),Ve,e(C,{block:"",type:"submit",onClick:I(L,["prevent"])},{default:t(()=>[d(" Send Reset Code ")]),_:1})]),_:1}),l(T)?(g(),M(H,{key:0,indeterminate:"",color:"blue",size:"24",style:{position:"absolute","inset-block-start":"50%","inset-inline-start":"50%",transform:"translate(-50%, -50%)"}})):k("",!0),e(i,{cols:"12",class:"text-center text-base"},{default:t(()=>[e(D,{class:"text-primary ms-2",to:"/login"},{default:t(()=>[d(" Back To Login ")]),_:1})]),_:1}),k("",!0),e(i,{cols:"12",class:"text-center"},{default:t(()=>[r("p",be,h(l(n).smsError),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["modelValue"])])],64)}}};export{ze as default};
