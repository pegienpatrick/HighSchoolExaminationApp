import{a as b}from"./axios-G2rPRu76.js";import{_ as B,Q as C,r as p,R as x,c as d,n as r,m as i,o as u,u as e,F as y,a4 as D,t as F,a as N,a2 as T,b as $,Z as I}from"./index-2BP_lAh-.js";import{V as c,a as g}from"./VRow-xKr1Tf61.js";import{V}from"./VSelect-Eu2mWPD8.js";import{V as O}from"./VTextField-vshtD9Ps.js";import{V as R}from"./VDataTable-B73U__Cq.js";/* empty css              */import"./form-v140H6Iy.js";import"./forwardRefs-y8pOSn8h.js";import"./VMenu-QWZbat62.js";import"./index-QAR5VDvd.js";import"./ssrBoot-qj21oVFS.js";import"./VImg-noq4ZFey.js";import"./VAvatar-nprCTEVN.js";import"./VDivider-unEwWr4n.js";import"./VOverlay-vCK72WMx.js";import"./easing-Apq16fr0.js";import"./lazy-CnP97q8J.js";import"./dialog-transition-zP723b51.js";import"./VCheckboxBtn-qa1S9f3S.js";import"./VLabel-PkvqaiGN.js";import"./VChip-JOpZ6GZf.js";import"./VField-2KSXPk5K.js";import"./VInput-fOfT7lUm.js";import"./VTable-VRqjCfuz.js";const U={key:0},j={__name:"students",setup(z){const f=C(),n=p({data:[],headers:[],search:""});let h=window.location.protocol+"//"+window.location.hostname+":8080";b.get(h+"/api/v1/student/allStudents",{headers:{"Content-Type":"application/json",Authorization:x.get("Authorization")}}).then(o=>{console.log(o);let t=o.data;const a=["num","reserved","guardians"];n.value.headers=Object.keys(t[0]).filter(m=>!a.includes(m));for(var l=0;l<t.length;l++){const m=new Date(t[l].dateOfBirth),v=String(m.getDate()).padStart(2,"0"),w=String(m.getMonth()+1).padStart(2,"0"),A=m.getFullYear();t[l].dateOfBirth=`${v}-${w}-${A}`,console.log(t[l].dateOfBirth),a.forEach(k=>{delete t[l][k]})}n.value.data=t}).catch(o=>{console.log(o),(o.response&&o.response.status===401||o.response.status===403)&&window.open("/login","_blank")});let _="";const S=o=>{f.push(`/viewStudent?admNo=${o.admNo}`)},s=p({stage:"All",stream:"All"});return(o,t)=>(u(),d("div",null,[r(c,null,{default:i(()=>[r(g,null,{default:i(()=>[r(V,{label:"Select Stage (Form)",items:["All","1","2","3","4","Alumini"],modelValue:e(s).stage,"onUpdate:modelValue":t[0]||(t[0]=a=>e(s).stage=a)},null,8,["modelValue"])]),_:1}),r(g,null,{default:i(()=>[r(V,{label:"Select Stream ",items:["All","A","B","C"],modelValue:e(s).stream,"onUpdate:modelValue":t[1]||(t[1]=a=>e(s).stream=a)},null,8,["modelValue"])]),_:1})]),_:1}),r(c,null,{default:i(()=>[r(O,{modelValue:e(n).search,"onUpdate:modelValue":t[2]||(t[2]=a=>e(n).search=a),label:"Search",onInput:e(_)},null,8,["modelValue","onInput"]),r(R,{items:e(n).data,class:"elevation-1 custom-table",striped:"",search:e(n).search,"items-per-page":e(s).stage=="All"?10:e(n).data.length},{item:i(({item:a})=>[(e(s).stage=="All"||e(s).stage==a.stage)&&(e(s).stream=="All"||e(s).stream==a.stream)?(u(),d("tr",U,[(u(!0),d(y,null,D(e(n).headers,l=>(u(),d("td",{key:l.value},F(a[l]),1))),128)),N("td",null,[r(T,{onClick:l=>S(a)},{default:i(()=>[$("View")]),_:2},1032,["onClick"])])])):I("",!0)]),_:1},8,["items","search","items-per-page"])]),_:1})]))}},ue=B(j,[["__scopeId","data-v-470d4a4e"]]);export{ue as default};
