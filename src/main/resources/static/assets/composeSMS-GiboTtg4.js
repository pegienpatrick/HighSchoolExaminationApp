import{a as O}from"./axios-G2rPRu76.js";import{D as ie,L as de,a6 as ce,z as P,r as w,y as fe,at as me,af as ve,k as p,au as xe,R as ge,ad as Ve,b as t,W as T,F as B,T as L,av as he,aw as we,a9 as M,ae as pe,ax as Ce,ay as ye,X as Se,c as _e,w as o,o as Fe,B as z,u as v,a2 as Y,Y as j}from"./index-da36zxQg.js";import{a as ke,b as be,V as Pe}from"./VCard-2WKBUKTx.js";import{V as h,a as x}from"./VRow-ML7Wed7t.js";import{V as Ae}from"./VTextField-NB5bkSDZ.js";import{m as Re,a as Ie,u as Ne,V as W,f as Te,b as Be,c as Me,d as X}from"./VField-nvO2FZcE.js";import{f as ze}from"./forwardRefs-y8pOSn8h.js";import{I as Ue}from"./VImg-M6_-POrR.js";import{V as q}from"./VSelect-5NLDYKSH.js";import"./VAvatar-tNbxmyAy.js";/* empty css              */import"./index-RAJRrmaN.js";import"./form-IPn-8Ex9.js";import"./easing-imumzmxr.js";import"./VMenu-7YLHhZml.js";import"./ssrBoot-br2oOC-_.js";import"./VDivider-saeaGujC.js";import"./VOverlay-lgO2AdKb.js";import"./lazy-5LinAJ3H.js";import"./VCheckboxBtn-P8KvS9GZ.js";import"./VChip-tYXUJtdb.js";const Ge=ie({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Re(),...Ie()},"VTextarea"),He=de()({name:"VTextarea",directives:{Intersect:Ue},inheritAttrs:!1,props:Ge(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,C){let{attrs:n,emit:y,slots:i}=C;const a=ce(e,"modelValue"),{isFocused:u,focus:d,blur:J}=Ne(e),K=P(()=>typeof e.counterValue=="function"?e.counterValue(a.value):(a.value||"").toString().length),Q=P(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function Z(l,s){var r,c;!e.autofocus||!l||(c=(r=s[0].target)==null?void 0:r.focus)==null||c.call(r)}const U=w(),S=w(),G=fe(""),_=w(),ee=P(()=>e.persistentPlaceholder||u.value||e.active);function A(){var l;_.value!==document.activeElement&&((l=_.value)==null||l.focus()),u.value||d()}function te(l){A(),y("click:control",l)}function ae(l){y("mousedown:control",l)}function le(l){l.stopPropagation(),A(),M(()=>{a.value="",pe(e["onClick:clear"],l)})}function oe(l){var r;const s=l.target;if(a.value=s.value,(r=e.modelModifiers)!=null&&r.trim){const c=[s.selectionStart,s.selectionEnd];M(()=>{s.selectionStart=c[0],s.selectionEnd=c[1]})}}const g=w(),F=w(+e.rows),R=P(()=>["plain","underlined"].includes(e.variant));me(()=>{e.autoGrow||(F.value=+e.rows)});function V(){e.autoGrow&&M(()=>{if(!g.value||!S.value)return;const l=getComputedStyle(g.value),s=getComputedStyle(S.value.$el),r=parseFloat(l.getPropertyValue("--v-field-padding-top"))+parseFloat(l.getPropertyValue("--v-input-padding-top"))+parseFloat(l.getPropertyValue("--v-field-padding-bottom")),c=g.value.scrollHeight,k=parseFloat(l.lineHeight),I=Math.max(parseFloat(e.rows)*k+r,parseFloat(s.getPropertyValue("--v-input-control-height"))),N=parseFloat(e.maxRows)*k+r||1/0,m=ye(c??0,I,N);F.value=Math.floor((m-r)/k),G.value=Ce(m)})}ve(V),p(a,V),p(()=>e.rows,V),p(()=>e.maxRows,V),p(()=>e.density,V);let f;return p(g,l=>{l?(f=new ResizeObserver(V),f.observe(g.value)):f==null||f.disconnect()}),xe(()=>{f==null||f.disconnect()}),ge(()=>{const l=!!(i.counter||e.counter||e.counterValue),s=!!(l||i.details),[r,c]=Ve(n),{modelValue:k,...I}=W.filterProps(e),N=Te(e);return t(W,T({ref:U,modelValue:a.value,"onUpdate:modelValue":m=>a.value=m,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":R.value},e.class],style:e.style},r,I,{centerAffix:F.value===1&&!R.value,focused:u.value}),{...i,default:m=>{let{id:b,isDisabled:H,isDirty:E,isReadonly:ne,isValid:ue}=m;return t(Be,T({ref:S,style:{"--v-textarea-control-height":G.value},onClick:te,onMousedown:ae,"onClick:clear":le,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},N,{id:b.value,active:ee.value||E.value,centerAffix:F.value===1&&!R.value,dirty:E.value||e.dirty,disabled:H.value,focused:u.value,error:ue.value===!1}),{...i,default:re=>{let{props:{class:D,...$}}=re;return t(B,null,[e.prefix&&t("span",{class:"v-text-field__prefix"},[e.prefix]),L(t("textarea",T({ref:_,class:D,value:a.value,onInput:oe,autofocus:e.autofocus,readonly:ne.value,disabled:H.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:A,onBlur:J},$,c),null),[[he("intersect"),{handler:Z},null,{once:!0}]]),e.autoGrow&&L(t("textarea",{class:[D,"v-textarea__sizer"],id:`${$.id}-sizer`,"onUpdate:modelValue":se=>a.value=se,ref:g,readonly:!0,"aria-hidden":"true"},null),[[we,a.value]]),e.suffix&&t("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:s?m=>{var b;return t(B,null,[(b=i.details)==null?void 0:b.call(i,m),l&&t(B,null,[t("span",null,null),t(Me,{active:e.persistentCounter||u.value,value:K.value,max:Q.value},i.counter)])])}:void 0})}),ze({},U,S,_)}}),rt={__name:"composeSMS",setup(e){Se();let C=window.location.protocol+"//"+window.location.hostname+":8080";const n=w({admNo:"",phone:"x",form:"",stream:"All",message:""}),y=()=>{O.post(C+"/api/v1/sms/smsGuardians",n.value,{headers:{Authorization:j.get("Authorization")}}).then(a=>{console.log(a),alert(a.data)}).catch(a=>{console.log(a),alert("error sending:"+a.response.data)})},i=()=>{O.post(C+`/api/v1/sms/smsClassGuardians/${n.value.form}/${n.value.stream}`,n.value.message,{headers:{Authorization:j.get("Authorization")}}).then(a=>{console.log(a),alert(a.data)}).catch(a=>{console.log(a),alert("error sending:"+a.response.data)})};return(a,u)=>(Fe(),_e("div",null,[t(ke,null,{default:o(()=>[t(be,null,{default:o(()=>[z(" Compose New SMS ")]),_:1}),t(Pe,null,{default:o(()=>[t(h,null,{default:o(()=>[t(x,null,{default:o(()=>[t(He,{label:"Type Your Message",counter:"",pages:"",modelValue:v(n).message,"onUpdate:modelValue":u[0]||(u[0]=d=>v(n).message=d)},null,8,["modelValue"])]),_:1})]),_:1}),t(h,null,{default:o(()=>[t(x,null,{default:o(()=>[t(X,null,{default:o(()=>[z(" Select to Individual Student ")]),_:1})]),_:1})]),_:1}),t(h,null,{default:o(()=>[t(x,null,{default:o(()=>[t(Ae,{label:"Send to a Student",placeholder:"Enter Admission Number",modelValue:v(n).admNo,"onUpdate:modelValue":u[1]||(u[1]=d=>v(n).admNo=d)},null,8,["modelValue"])]),_:1}),t(x,null,{default:o(()=>[t(Y,{text:"Send to Admission Number",onClick:y})]),_:1})]),_:1}),t(h,null,{default:o(()=>[t(x,null,{default:o(()=>[t(X,null,{default:o(()=>[z(" Send to a Class or Stream ")]),_:1})]),_:1})]),_:1}),t(h,null,{default:o(()=>[t(x,null,{default:o(()=>[t(q,{label:"Form",items:["1","2","3","4"],modelValue:v(n).form,"onUpdate:modelValue":u[2]||(u[2]=d=>v(n).form=d)},null,8,["modelValue"])]),_:1}),t(x,null,{default:o(()=>[t(q,{label:"Stream",items:["All","A","B","C"],modelValue:v(n).stream,"onUpdate:modelValue":u[3]||(u[3]=d=>v(n).stream=d)},null,8,["modelValue"])]),_:1})]),_:1}),t(h,null,{default:o(()=>[t(x,null,{default:o(()=>[t(Y,{width:"100%",text:"Send Message",onClick:i})]),_:1})]),_:1})]),_:1})]),_:1})]))}};export{rt as default};
