import{a as _}from"./axios-G2rPRu76.js";import{_ as V,R as f,l as h,m as e,a5 as b,o as m,n as t,a as o,b as n,c as k,t as i,a2 as p,V as B,Z as g,k as y}from"./index-WKjbL8T9.js";import{s as v}from"./sweetalert2.all-41Y4Kfy6.js";import{_ as A}from"./GuardiansForm-J8j3qz07.js";import{V as d,a as l}from"./VRow-OVTj2QZh.js";import{a as D,b as N,V as S}from"./VCard-7Z-Nhb6D.js";import{V as x}from"./VAvatar-CH2A0OSR.js";import{V as z}from"./VAlert-3a85JbQ9.js";import{V as F}from"./VContainer-n885-TUJ.js";import"./VDialog-FOl7RVUN.js";import"./VOverlay-TBYimdhT.js";import"./easing-Apq16fr0.js";import"./lazy-b-hiN5pE.js";import"./VImg-mBLNfk7f.js";import"./forwardRefs-y8pOSn8h.js";import"./dialog-transition-ndbJkIK2.js";import"./VTextField-IrLm8OWS.js";import"./VField-zZ1l0zML.js";import"./index-o85Hqk3v.js";import"./VLabel-ll7gtFfh.js";import"./VInput-9aEGepXD.js";import"./form-y8kNbNCk.js";import"./VSelect-OHkD6uXj.js";import"./VMenu-QfTuqrl7.js";import"./ssrBoot-WNY3uwVA.js";import"./VDivider-waA0KO__.js";import"./VCheckboxBtn-G-nkP6-g.js";import"./VChip-nPbsihEe.js";import"./VTable-uXecweGY.js";/* empty css              */const E={components:{GuardianForm:A},data(){return{studentDetails:{},admNo:"",avatarImg:""}},mounted(){this.fetchStudentDetails(),console.log("mounted"),this.fetchStudentDetails()},methods:{fetchStudentDetails(){const r=window.location.protocol+"//"+window.location.hostname+":8080";this.admNo=this.$route.query.admNo,_.get(r+`/api/v1/student/viewStudent/${this.admNo}`,{headers:{Authorization:f.get("Authorization")}}).then(a=>{console.log(a),this.studentDetails=a.data.body,console.log(this.studentDetails);const u=new Date(this.studentDetails.dateOfBirth),w=String(u.getDate()).padStart(2,"0"),s=String(u.getMonth()+1).padStart(2,"0"),c=u.getFullYear();this.studentDetails.dateOfBirth=`${w}-${s}-${c}`}).catch(a=>{console.error("Error fetching student details:",a),console.log(a),a.response&&(a.response.status===401||a.response.status===403)&&window.open("/login","_blank")}),_.get(r+`/api/v1/studentPhoto/getStudentPhoto/${this.admNo}`,{responseType:"blob",headers:{Authorization:f.get("Authorization")}}).then(a=>{const u=new Blob([a.data],{type:"application/png"});this.avatarImg=URL.createObjectURL(u)})},editStudent(){this.$router.push(`/editStudent?admNo=${this.studentDetails.admNo}`)},deleteStudent(){v.fire({title:"Delete Student",text:"Are you sure you want to delete this student?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(r=>{if(r.isConfirmed){const a=window.location.protocol+"//"+window.location.hostname+":8080";_.get(a+`/api/v1/student/deleteStudent/${this.admNo}`,{headers:{Authorization:f.get("Authorization")}}).then(u=>{console.log(u),this.$router.push("/students")})}})}}},G={class:"w-100 d-block align-center"},I={key:0},O=o("strong",null,"Admission Number:",-1),R=o("strong",null,"Admission Number:",-1),T=o("strong",null,"Surname:",-1),M=o("strong",null,"First Name:",-1),U=o("strong",null,"Other Name:",-1),P=o("strong",null,"Date of Birth:",-1),j=o("strong",null,"Gender:",-1),L=o("strong",null,"Birth Certificate Number:",-1),Y=o("strong",null,"NEMIS Number:",-1),q=o("strong",null,"Stage (Form):",-1),K=o("strong",null,"Stream:",-1),Z=o("strong",null,"KCPE Marks:",-1),H=o("strong",null,"Cohort:",-1);function J(r,a,u,w,s,c){const C=y("GuardianForm");return m(),h(b,null,{default:e(()=>[t(F,null,{default:e(()=>[t(d,null,{default:e(()=>[t(l,{cols:"12"},{default:e(()=>[t(D,{elevation:"3"},{default:e(()=>[o("div",G,[t(x,{image:s.avatarImg,size:"200",class:"d-block"},null,8,["image"])]),t(N,{class:"text-h6 font-weight-bold"},{default:e(()=>[n("Student Details")]),_:1}),t(S,null,{default:e(()=>[t(l,{cols:"12"},{default:e(()=>[t(D,{title:"Student Details"},{default:e(()=>[t(S,{class:"d-flex"},{default:e(()=>[s.studentDetails==null?(m(),k("div",I,[t(d,{class:"w-100 d-block"},{default:e(()=>[t(l,null,{default:e(()=>[t(l,null,{default:e(()=>[o("p",null,[O,n(" "+i(this.admNo),1)])]),_:1})]),_:1})]),_:1}),t(d,{class:"w-100 d-block"},{default:e(()=>[t(l,null,{default:e(()=>[t(z,null,{default:e(()=>[n(" Record Not Found ")]),_:1})]),_:1})]),_:1}),t(d,null,{default:e(()=>[t(l,null,{default:e(()=>[t(p,{to:"/searchStudent"},{default:e(()=>[t(B,{icon:"ri-restart-line"}),n(" Search Again ")]),_:1})]),_:1})]),_:1})])):g("",!0),s.studentDetails!=null?(m(),h(d,{key:1},{default:e(()=>[t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[R,n(" "+i(s.studentDetails.admNo),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[T,n(" "+i(s.studentDetails.surname),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[M,n(" "+i(s.studentDetails.firstName),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[U,n(" "+i(s.studentDetails.otherName),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[P,n(" "+i(s.studentDetails.dateOfBirth),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[j,n(" "+i(s.studentDetails.gender),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[L,n(" "+i(s.studentDetails.birthCertno),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[Y,n(" "+i(s.studentDetails.ifmisNo),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[q,n(" "+i(s.studentDetails.stage),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[K,n(" "+i(s.studentDetails.stream),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[Z,n(" "+i(s.studentDetails.kcpeMarks),1)])]),_:1}),t(l,{md:"6",cols:"12"},{default:e(()=>[o("p",null,[H,n(" "+i(s.studentDetails.cohort),1)])]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1})]),_:1}),s.studentDetails!=null?(m(),h(d,{key:0,justify:"center"},{default:e(()=>[t(l,null,{default:e(()=>[t(p,{onClick:c.editStudent,color:"primary"},{default:e(()=>[n("Edit Student")]),_:1},8,["onClick"])]),_:1}),t(l),t(l,null,{default:e(()=>[t(p,{onClick:c.deleteStudent,color:"warning"},{default:e(()=>[n("Delete Student")]),_:1},8,["onClick"])]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(d,null,{default:e(()=>[t(l,null,{default:e(()=>[t(D,null,{default:e(()=>[t(N,null,{default:e(()=>[n(" Guardians ")]),_:1}),t(S,null,{default:e(()=>[t(C)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Bt=V(E,[["render",J]]);export{Bt as default};
