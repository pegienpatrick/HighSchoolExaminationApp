import{_ as U,X as z,r as v,Y as k,c,b as o,w as s,o as i,B as F,u as r,F as T,a4 as O,t as q,Z as S,e as R,a as A,a2 as D,a3 as E,p as $,m as L}from"./index-xVnyt9yu.js";import{a as y}from"./axios-G2rPRu76.js";import{V as j,a as p}from"./VRow-gHwNWVPx.js";import{a as x,b as N,V as B}from"./VCard-sd6GJVRG.js";import{V as X}from"./VForm-PYWl0C29.js";import{V as f}from"./VSelect-ILe0HWJq.js";import{V as Y}from"./VTextField-CtPzkPC5.js";import{V as Z}from"./VDataTable-Kad4Al3N.js";/* empty css              */import"./VAvatar-iXQkcGmt.js";import"./VImg-YmpmSzhE.js";import"./form-Fs2--v9g.js";import"./forwardRefs-y8pOSn8h.js";import"./VMenu-yxDCCHIV.js";import"./index-yfIYSuHd.js";import"./ssrBoot-GX8WHyxq.js";import"./VDivider-IGpMMh-l.js";import"./VOverlay-0I2wVsb2.js";import"./easing-imumzmxr.js";import"./lazy-YeCD7kcS.js";import"./VCheckboxBtn--yVtLh1Z.js";import"./VField-2MQrz8bF.js";import"./VChip--5OHLTbF.js";import"./VTable-SC0E6epR.js";const G=m=>($("data-v-f7e08ee1"),m=m(),L(),m),H=G(()=>A("p",null,[A("strong",null,"Marks")],-1)),J={key:0},K={__name:"studentsubjects",setup(m){const w=z();let h=window.location.protocol+"//"+window.location.hostname+":8080";w.currentRoute.value.query.exam,w.currentRoute.value.query.stage;const n=v({optionals:[],optionalsReadable:new Map}),b=v({data:[],filtered:[],search:""}),g=v({data:[]});y.get(h+"/api/v1/subjectSelection/optionalSubjects",{headers:{Authorization:k.get("Authorization")}}).then(l=>{console.log(l),n.value.optionals=l.data;for(const a in n.value.optionals){var t=[];for(const e in n.value.optionals[a])t.push(n.value.optionals[a][e].subjectName);console.log(a),n.value.optionalsReadable.set(a,t)}console.log(n.value.optionals),console.log(n.value.optionalsReadable)});const d=v({data:[]});let C=[];const V=new Map;y.get(h+"/api/v1/subjectSelection/availableSubjects",{headers:{Authorization:k.get("Authorization")}}).then(l=>{console.log(l),C=l.data,C.forEach(t=>{V.set(t.subjectCode,{subjectName:t.subjectName,subjectRep:t.subjectRep})}),console.log(V),console.log(V.get(101))}),y.get(h+"/api/v1/subjectSelection/studentSelections",{headers:{Authorization:k.get("Authorization")}}).then(l=>{console.log(l),g.value.data=l.data;var a;a=Object.keys(g.value.data[0]);for(var t=0;t<a.length-1;t++)d.value.data.push({title:a[t],value:a[t],align:"center"});for(var a=Object.keys(l.data[0].subjectSelection),t=0;t<a.length;t++){var e=a[t],u="   "+e+"  (Select One)  ";e=="hasSelected"&&(u="Subjects"),e!="studentId"&&d.value.data.push({title:u,value:e})}d.value.data.push({title:"Action",value:"action"})});const I=l=>{let t=[];for(const a in l)if(a!="subjectSelection")t.push({value:l[a],key:a,type:1});else for(const e in l[a])for(const u in d.value.data)d.value.data[u].value==e&&t.push({value:l[a][e],key:e,type:2});return t},_=(l,t)=>{console.log(l),console.log("getting "+t);var a=l.get(t);return console.log(a),a},M=l=>{console.log(l)};return(l,t)=>(i(),c("div",null,[o(j,null,{default:s(()=>[o(p,null,{default:s(()=>[o(x,null,{default:s(()=>[o(N,null,{default:s(()=>[F(" Subjects Selections ")]),_:1}),o(B,null,{default:s(()=>[o(X,null,{default:s(()=>[o(j,null,{default:s(()=>[o(p,null,{default:s(()=>[o(f,{label:"Form (stage)",placeholder:"",items:["All","1","2","3","4"],value:"All"})]),_:1}),o(p,null,{default:s(()=>[o(f,{label:"Stream",placeholder:"Select Stream",items:["All","A","B","C"],value:"All"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(j,null,{default:s(()=>[o(p,null,{default:s(()=>[o(x,null,{default:s(()=>[o(N,null,{default:s(()=>[H]),_:1}),o(B,null,{default:s(()=>[o(p,null,{default:s(()=>[o(Y,{modelValue:r(b).search,"onUpdate:modelValue":t[0]||(t[0]=a=>r(b).search=a),label:"Search",clearable:""},null,8,["modelValue"])]),_:1}),o(Z,{items:r(g).data,search:r(b).search,class:"elevation-1 w-100 d-block",striped:"","items-per-page":50,headers:r(d).data},{item:s(({item:a})=>[(i(),c("tr",{key:a.admNo},[(i(!0),c(T,null,O(I(a),e=>(i(),c("td",{key:e.key,align:"center"},[e.type==1?(i(),c("span",J,q(e.value),1)):S("",!0),e.key=="hasSelected"?(i(),R(f,{key:1,modelValue:["All","Selection"][e.value==!1?0:1],"onUpdate:modelValue":u=>["All","Selection"][e.value==!1?0:1]=u,placeholder:e.key,class:"w-100 inputMarks",items:["All","Selection"],onChange:u=>e.value=l.selectedIndex(this)},null,8,["modelValue","onUpdate:modelValue","placeholder","onChange"])):S("",!0),e.type==2&&e.key!="hasSelected"?(i(),R(f,{key:2,modelValue:_(r(n).optionalsReadable,e.key)[e.value],"onUpdate:modelValue":u=>_(r(n).optionalsReadable,e.key)[e.value]=u,class:"w-100 inputMarks",label:e.key,items:_(r(n).optionalsReadable,e.key)},null,8,["modelValue","onUpdate:modelValue","label","items"])):S("",!0)]))),128)),A("td",null,[o(D,{text:"Update",onClick:E(e=>M(a),["prevent"])},null,8,["onClick"])])]))]),_:1},8,["items","search","headers"])]),_:1})]),_:1})]),_:1})]),_:1})]))}},ke=U(K,[["__scopeId","data-v-f7e08ee1"]]);export{ke as default};
