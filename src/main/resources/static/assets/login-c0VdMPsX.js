import{a as y,b as C,c as T,d as B}from"./auth-v1-tree-Q__A_nzM.js";import{l as L}from"./logo-lSNaS3Cd.js";import{a as E}from"./axios-G2rPRu76.js";import{Q as N,r as V,j as P,h as D,c as R,n as e,m as t,u as n,o as _,a as r,b as m,a2 as I,l as M,Z as c,t as S,R as j,k as U,a1 as z}from"./index-WKjbL8T9.js";import{a as F,d as $,b as H,V as h}from"./VCard-7Z-Nhb6D.js";import{V as p}from"./VImg-mBLNfk7f.js";import{V as A}from"./VForm-6aTEnKMd.js";import{V as Q,a as u}from"./VRow-OVTj2QZh.js";import{V as g}from"./VTextField-IrLm8OWS.js";import{V as W}from"./VCheckbox-amzyUcbz.js";import"./VDivider-waA0KO__.js";import"./VAvatar-CH2A0OSR.js";import"./form-y8kNbNCk.js";import"./forwardRefs-y8pOSn8h.js";/* empty css              */import"./VField-zZ1l0zML.js";import"./index-o85Hqk3v.js";import"./VLabel-ll7gtFfh.js";import"./VInput-9aEGepXD.js";import"./easing-Apq16fr0.js";import"./VCheckboxBtn-G-nkP6-g.js";const Z={class:"auth-wrapper d-flex align-center justify-center pa-4"},q={class:"d-flex"},G=["innerHTML"],J=r("h5",{class:"text-h5 font-weight-semibold mb-1"}," Welcome to PExam System!  ",-1),K=r("p",{class:"mb-0"}," Please sign-in to your account ",-1),O={class:"d-flex align-center justify-space-between flex-wrap mt-1 mb-4"},X=r("a",{class:"ms-2 mb-1",href:"/forgotPassword"}," Forgot Password? ",-1),Y=r("span",null,"New on our System?",-1);const ee={class:"text-h6 font-weight-semibold text-error"},Ce={__name:"login",setup(te){const b=N(),o=V({username:"",password:"",remember:!0,loginError:""}),x=P(),v=D(()=>x.global.name.value==="light"?y:C),i=V(!1);let w=window.location.protocol+"//"+window.location.hostname+":8080",d=!1;const f=async()=>{try{d=!0;const s=await E.post(w+"/api/v1/user/login",{username:o.value.username,password:o.value.password});console.log(s.data),j.set("Authorization",s.data.authorization,"7d"),b.push("/"),d=!1}catch(s){console.error("Login failed:",s),s.response.status==500?o.value.loginError=s.response.data.errors:s.response.status==400?o.value.loginError=s.response.data.message:o.value.loginError="Incorrect Login Information",d=!1}};return(s,a)=>{const k=U("RouterLink");return _(),R("div",Z,[e(F,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:t(()=>[e($,{class:"justify-center"},{prepend:t(()=>[r("div",q,[r("div",{innerHTML:n(L)},null,8,G)])]),default:t(()=>[e(H,{class:"font-weight-semibold text-2xl text-uppercase"},{default:t(()=>[m(" PExam System ")]),_:1})]),_:1}),e(h,{class:"pt-2"},{default:t(()=>[J,K]),_:1}),e(h,null,{default:t(()=>[e(A,{onSubmit:a[4]||(a[4]=()=>{s.preventDefault(),f()})},{default:t(()=>[e(Q,null,{default:t(()=>[e(u,{cols:"12"},{default:t(()=>[e(g,{modelValue:o.value.username,"onUpdate:modelValue":a[0]||(a[0]=l=>o.value.username=l),label:"username",type:"text"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:t(()=>[e(g,{modelValue:o.value.password,"onUpdate:modelValue":a[1]||(a[1]=l=>o.value.password=l),label:"Password",placeholder:"路路路路路路路路路路路路",type:i.value?"text":"password","append-inner-icon":i.value?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":a[2]||(a[2]=l=>i.value=!i.value)},null,8,["modelValue","type","append-inner-icon"]),r("div",O,[e(W,{modelValue:o.value.remember,"onUpdate:modelValue":a[3]||(a[3]=l=>o.value.remember=l),label:"Remember me"},null,8,["modelValue"]),X]),e(I,{block:"",type:"submit",to:"/login",onClick:f},{default:t(()=>[m(" Login ")]),_:1})]),_:1}),n(d)?(_(),M(z,{key:0,indeterminate:"",color:"blue",size:"24",style:{position:"absolute","inset-block-start":"50%","inset-inline-start":"50%",transform:"translate(-50%, -50%)"}})):c("",!0),e(u,{cols:"12",class:"text-center text-base"},{default:t(()=>[Y,e(k,{class:"text-primary ms-2",to:"/register"},{default:t(()=>[m(" Create an account ")]),_:1})]),_:1}),c("",!0),e(u,{cols:"12",class:"text-center"},{default:t(()=>[r("p",ee,S(o.value.loginError),1)]),_:1}),c("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(p,{class:"auth-footer-start-tree d-none d-md-block",src:n(T),width:250},null,8,["src"]),e(p,{src:n(B),class:"auth-footer-end-tree d-none d-md-block",width:350},null,8,["src"]),e(p,{class:"auth-footer-mask d-none d-md-block",src:n(v)},null,8,["src"])])}}};export{Ce as default};
