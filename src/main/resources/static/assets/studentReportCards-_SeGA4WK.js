import{a as U}from"./axios-G2rPRu76.js";import{_ as R,Q as b,r as d,ac as y,l as x,m as e,a5 as k,R as D,o as V,n as a,b as f,a as r,t as m,a2 as B,V as N,c as I,ad as S,Z as T}from"./index-romlxh2l.js";import{V as _,a as c}from"./VRow-hVaYJ55S.js";import{a as g,b as q,V as h,d as z}from"./VCard-CyiRyH--.js";import{V as A}from"./VContainer-62A_ZZ-B.js";/* empty css              */import"./VAvatar-1wPPUIPn.js";import"./VImg-sw7GzouM.js";b();const P={setup(){const p=d({}),v=d(""),n=d(""),t=d({data:"",title:"",progres:1}),o=d({data:"",stream:""});d(null);const u=b(),w=()=>{o.value.data=u.currentRoute.value.query.stage,o.value.stream=u.currentRoute.value.query.stream,n.value=u.currentRoute.value.query.examinationId;const C=window.location.protocol+"//"+window.location.hostname+":8080"+`/api/v1/reportCard/bulkReportCards/${n.value}/${o.value.data}?stream=${o.value.stream}`;U.get(C,{responseType:"blob",headers:{Authorization:D.get("Authorization")},onDownloadProgress:l=>{const i=Math.round(l.loaded*100/l.total);console.log(`Download progress: ${i}%`),t.value.progres=i}}).then(l=>{const i=new Blob([l.data],{type:"application/pdf"}),s=document.createElement("a");s.href=URL.createObjectURL(i),s.download=o.value.data+o.value.stream+n.value+" Report Card.pdf",document.body.appendChild(s),document.body.removeChild(s),t.value.data=s.href,t.value.title=s.download}).catch(l=>{console.error("Error fetching PDF:",l)})};return y(()=>{w()}),{studentDetails:p,admNo:v,examinationId:n,pdfUrl:t,loadPdf:w,stage:o}}},E=r("strong",null,"Form :",-1),F=r("strong",null,"Stream : ",-1),L=["download","href"],M={key:0,class:"progress"},j=["src","title"];function O(p,v,n,t,o,u){return V(),x(k,null,{default:e(()=>[a(A,null,{default:e(()=>[a(_,null,{default:e(()=>[a(c,{cols:"12"},{default:e(()=>[a(g,{elevation:"3"},{default:e(()=>[a(q,{class:"text-h6 font-weight-bold"},{default:e(()=>[f("Student Report Cards")]),_:1}),a(h,null,{default:e(()=>[a(c,{cols:"12"},{default:e(()=>[a(g,{title:"Reports Cards"},{default:e(()=>[a(h,{class:"d-flex"},{default:e(()=>[a(_,null,{default:e(()=>[a(c,{md:"6",cols:"12"},{default:e(()=>[r("p",null,[E,f(" "+m(t.stage.data),1)])]),_:1}),a(c,{md:"6",cols:"12"},{default:e(()=>[r("p",null,[F,f(" "+m(t.stage.stream),1)])]),_:1})]),_:1})]),_:1}),r("a",{class:"btn btn-primary",color:"success",download:t.pdfUrl.title,href:t.pdfUrl.data},[a(B,{text:"Download",loading:t.pdfUrl.progres>0&&t.pdfUrl.progres<100},{default:e(()=>[f(" Download _ "),a(N,{icon:"ri-download-line"})]),_:1},8,["loading"])],8,L)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(_,null,{default:e(()=>[a(c,null,{default:e(()=>[a(g,null,{default:e(()=>[a(z,null,{default:e(()=>[t.pdfUrl.progres>0&&t.pdfUrl.progres<100?(V(),I("div",M,[r("div",{class:"progress-bar",role:"progressbar",style:S({width:p.progres+"%"})},m(t.pdfUrl.progres)+"% ",5)])):T("",!0)]),_:1}),a(h,null,{default:e(()=>[r("iframe",{src:t.pdfUrl.data,width:"100%",height:"1000",frameborder:"0",title:t.pdfUrl.title},null,8,j)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const $=R(P,[["render",O]]);export{$ as default};
