import{x as W,y as Z,bG as q,D as J,bH as O,L as X,n as e,Q as Y,r as T,R as c,af as ee,c as B,a as I,m as l,u as n,F as $,o as _,a2 as g,b as x,a4 as G,l as F,a3 as le,N as te,t as k,V as A,Z as ae,k as oe}from"./index-Uh7jaitX.js";import{a as f}from"./axios-G2rPRu76.js";import{s as ue}from"./sweetalert2.all-Lv0CwX9J.js";import{V as r,a as u}from"./VRow-YKHVWUPT.js";import{V as se}from"./VDialog-afQCRUHS.js";import{a as V,V as p,b as N,d as P,c as ne}from"./VCard--Q3RrOcZ.js";import{V as R}from"./VForm-Qa0s-xNR.js";import{V as re}from"./VCheckbox-BVGiLfKj.js";import{V as C}from"./VTextField-x5HF6B1a.js";import{V as H}from"./VSpacer-JNrHPOmG.js";/* empty css              */import"./VOverlay-JQMdgNY7.js";import"./easing-Apq16fr0.js";import"./lazy-VLJ9onKy.js";import"./VImg-3j7UJspv.js";import"./forwardRefs-y8pOSn8h.js";import"./dialog-transition-8h0jTMyV.js";import"./VAvatar-IC0G5Tcb.js";import"./form-ie-nNZkP.js";import"./VCheckboxBtn-eJ8X4Ro6.js";import"./VLabel-q3opiiJh.js";import"./VField-ZFhKK1Ca.js";import"./index-191e5APl.js";const de=W({...Z(),...q()},"VLayout"),ie=J()({name:"VLayout",props:de(),setup(b,m){let{slots:s}=m;const{layoutClasses:w,layoutStyles:d,getLayoutItem:S,items:z,layoutRef:L}=O(b);return X(()=>{var h;return e("div",{ref:L,class:[w.value,b.class],style:[d.value,b.style]},[(h=s.default)==null?void 0:h.call(s)])}),{getLayoutItem:S,items:z}}}),$e={__name:"TimetableSettings",setup(b){Y();let m=window.location.protocol+"//"+window.location.hostname+":8080";const s=T({year:2024,term:"",title:"",grades:[],sel:[],success:null});let w=["1","2","3","4"];const d=T({show:!1,item:null}),S=o=>{d.value.show=!0,d.value.item=o},z=o=>{},L=()=>{s.value.grades=[];for(var o=0;o<w.length;o++)s.value.sel[parseInt(o)]&&s.value.grades.push(parseInt(o)+1);console.log(s.value.grades),f.post(m+"/api/v1/timetable/setSpecializedGrades",s.value.grades,{headers:{Authorization:c.get("Authorization")}}).then(t=>{console.log(t),s.value.success=!0,window.setTimeout(()=>{s.value.success=null},2e3)}).catch(t=>{console.log(t);var v="";t.response.data.message?v=t.response.data.message:v=t.response.data,alert("error "+v)})};f.get(m+"/api/v1/timetable/getSpecializedGrades",{headers:{Authorization:c.get("Authorization")}}).then(o=>{console.log(o),s.value.sel=[!1,!1,!1,!1],s.value.grades=o.data;for(var t=0;t<s.value.grades.length;t++)s.value.sel[s.value.grades[t]-1]=!0;console.log(s.value.grades),console.log(s.value.sel)});const h=T([]),y=()=>{f.get(m+"/api/v1/slots/listSlots",{headers:{Authorization:c.get("Authorization")}}).then(o=>{console.log(o),h.value=o.data})};y();const j=()=>{ue.fire({title:"Enter Break Title",input:"text",inputLabel:"Break Title",inputPlaceholder:"Type here...",showCancelButton:!0}).then(o=>{o&&f.get(m+"/api/v1/slots/addBreak?title="+o.value,{headers:{Authorization:c.get("Authorization")}}).then(t=>{console.log(t),y()})})},E=(o,t)=>{f.get(m+`/api/v1/slots/move/${t}/${o}`,{headers:{Authorization:c.get("Authorization")}}).then(v=>{console.log(v),y()})},i=T({success:null});(()=>{f.get(m+"/api/v1/slots/lessonsPerDay",{headers:{Authorization:c.get("Authorization")}}).then(o=>{console.log(o),i.value=o.data})})();const K=()=>{i.value.startTime.length<8&&(i.value.startTime+=":00"),console.log(i.value),f.put(m+"/api/v1/slots/lessonsPerDay",i.value,{headers:{Authorization:c.get("Authorization")}}).then(o=>{console.log(o),i.value.success=!0,window.setTimeout(()=>{i.value.success=null},2e3),y()})},M=()=>{console.log(d.value),f.put(m+"/api/v1/slots/updateSlot",d.value.item,{headers:{Authorization:c.get("Authorization")}}).then(o=>{console.log(o),d.value.show=!1,d.value.success=!0,window.setTimeout(()=>{d.value.success=null},2e3),y()})};return(o,t)=>{const v=oe("v-flex"),Q=ee("draggable");return _(),B($,null,[I("div",null,[e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(V,null,{default:l(()=>[e(p,null,{default:l(()=>[e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(g,{text:"TimeTable Home",to:"/teachingTimeTable"})]),_:1}),e(u,null,{default:l(()=>[e(g,{text:"Venues",to:"/venues"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(V,null,{default:l(()=>[e(N,null,{default:l(()=>[x(" Select Forms With Selected Subjects ")]),_:1}),e(p,null,{default:l(()=>[e(R,{onSubmit:t[1]||(t[1]=a=>{o.preventDefault(),o.submitform()})},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{md:"6",cols:"12"},{default:l(()=>[(_(!0),B($,null,G(n(w),a=>(_(),F(re,{key:a,label:`Form ${a}`,modelValue:n(s).sel[parseInt(a)-1],"onUpdate:modelValue":D=>n(s).sel[parseInt(a)-1]=D},null,8,["label","modelValue","onUpdate:modelValue"]))),128))]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(g,{text:n(s).success==null?"Update Changes":"Updated",color:n(s).success==null?"primary":"success",type:"Submit",onClick:t[0]||(t[0]=le(a=>L(),["prevent"]))},null,8,["text","color"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(V,null,{default:l(()=>[e(P,null,{default:l(()=>[e(r,null,{default:l(()=>[e(u)]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(R,null,{default:l(()=>[e(r,null,{default:l(()=>[e(u,{cols:"12",md:"4"},{default:l(()=>[e(C,{label:"Lessons Per Day",type:"number",modelValue:n(i).lessons,"onUpdate:modelValue":t[2]||(t[2]=a=>n(i).lessons=a)},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(C,{type:"number",label:"Lesson Duration",modelValue:n(i).duration,"onUpdate:modelValue":t[3]||(t[3]=a=>n(i).duration=a)},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"4"},{default:l(()=>[e(C,{label:"Lessons Start At",type:"time",modelValue:n(i).startTime,"onUpdate:modelValue":t[4]||(t[4]=a=>n(i).startTime=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(g,{class:"w-100",variant:"outlined",text:n(i).success==null?"Save Changes":"Updated",color:n(i).success==null?"primary":"success",onClick:K},null,8,["text","color"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(V,null,{default:l(()=>[e(N,null,{default:l(()=>[x("Lessons Arrangement")]),_:1}),e(P,null,{default:l(()=>[e(g,{"prepend-icon":"ri-add-line",text:"Add New Break",onClick:j})]),_:1}),e(p,null,{default:l(()=>[e(ie,{style:{overflow:"auto"}},{default:l(()=>[(_(!0),B($,null,G(n(h),(a,D)=>te((_(),F(v,{key:D,class:"item"},{default:l(()=>[e(V,null,{default:l(()=>[e(N,null,{default:l(()=>[x(k(a.title),1)]),_:2},1024),e(p,null,{default:l(()=>[I("span",null,k(a.start)+" - "+k(a.end),1)]),_:2},1024),e(p,null,{default:l(()=>[I("p",null,k(a.duration)+" minutes ",1)]),_:2},1024),e(p,null,{default:l(()=>[x(k(a.slotType),1)]),_:2},1024),a.slotType=="BREAK"?(_(),F(P,{key:0,class:"d-block",style:{display:"block"}},{default:l(()=>[e(r,null,{default:l(()=>[e(u,{cols:"6"},{default:l(()=>[e(A,{icon:"ri-arrow-left-line",onClick:U=>E("left",a.num)},null,8,["onClick"])]),_:2},1024),e(u,{cols:"6"},{default:l(()=>[e(A,{icon:"ri-arrow-right-line",onClick:U=>E("right",a.num)},null,8,["onClick"])]),_:2},1024)]),_:2},1024),e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(A,{icon:"ri-eraser-line",onClick:U=>z(a),color:"error"},null,8,["onClick"])]),_:2},1024),e(u,null,{default:l(()=>[e(A,{icon:"ri-edit-line",onClick:U=>S(a)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):ae("",!0)]),_:2},1024)]),_:2},1024)),[[Q,".item"]])),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),e(se,{modelValue:n(d).show,"onUpdate:modelValue":t[7]||(t[7]=a=>n(d).show=a),class:"modal fade small-modal",cols:"12","max-width":"600"},{default:l(()=>[e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(V,{title:"Edit Exam Title"},{default:l(()=>[e(p,null,{default:l(()=>[e(R,null,{default:l(()=>[e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(C,{label:"New Title",modelValue:n(d).item.title,"onUpdate:modelValue":t[5]||(t[5]=a=>n(d).item.title=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(C,{label:"Duration (minutes)",modelValue:n(d).item.duration,"onUpdate:modelValue":t[6]||(t[6]=a=>n(d).item.duration=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(H),e(H),e(r,null,{default:l(()=>[e(u)]),_:1}),e(ne,null,{default:l(()=>[e(r,null,{default:l(()=>[e(u,null,{default:l(()=>[e(g,{class:"w-100",variant:"outlined",text:n(d).success==null?"Save Changes":"Updated",color:n(d).success==null?"primary":"success",onClick:M},null,8,["text","color"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{$e as default};
