import{_ as M,X as T,r as c,Y as V,c as p,b as a,w as o,o as i,B as F,u,F as O,a4 as q,t as D,Z as g,e as y,a3 as E,a2 as G,p as L,m as X,a as R}from"./index-zYAuA0qV.js";import{a as h}from"./axios-G2rPRu76.js";import{V as A,a as m}from"./VRow-7mHl22X1.js";import{a as U,b as z,V as B}from"./VCard-Mp1410Mc.js";import{V as Y}from"./VForm-8SLQ-6iH.js";import{V as S}from"./VSelect-4nlBnCuk.js";import{V as Z}from"./VTextField-JQu1_MM5.js";import{V as $}from"./VDataTable-qyJ_490b.js";/* empty css              */import"./VAvatar-BX0ZOUQe.js";import"./VImg-XJYe2yvh.js";import"./form-5RZ1SEPf.js";import"./forwardRefs-y8pOSn8h.js";import"./VMenu-AAQK7vOC.js";import"./index-Dx9PTrLH.js";import"./ssrBoot-sA4uMkfL.js";import"./VDivider-AOx8292S.js";import"./VOverlay-fwCDSazt.js";import"./easing-Apq16fr0.js";import"./lazy-p-tG6HZU.js";import"./dialog-transition-BhwFHhVk.js";import"./VCheckboxBtn-HguwSvFI.js";import"./VLabel-H24OS9-G.js";import"./VChip-LZhjDHi2.js";import"./VField-pvgEwNC3.js";import"./VTable-tqJF_m3V.js";const H=b=>(L("data-v-d1f0a274"),b=b(),X(),b),J=H(()=>R("p",null,[R("strong",null,"Marks")],-1)),K={key:0},P={__name:"studentsubjects",setup(b){const w=T();let v=window.location.protocol+"//"+window.location.hostname+":8080";w.currentRoute.value.query.exam,w.currentRoute.value.query.stage;const r=c({optionals:[],optionalsReadable:new Map}),j=c({data:[],filtered:[],search:""}),_=c({data:[]});h.get(v+"/api/v1/subjectSelection/optionalSubjects",{headers:{Authorization:V.get("Authorization")}}).then(s=>{console.log(s),r.value.optionals=s.data;for(const e in r.value.optionals){var l=[];l.push({title:"None",value:-1});for(const t in r.value.optionals[e])l.push({title:r.value.optionals[e][t].subjectName,value:parseInt(r.value.optionals[e][t].subjectCode)});console.log(e),r.value.optionalsReadable.set(e,l)}console.log(r.value.optionals),console.log(r.value.optionalsReadable)});const d=c({data:[]});let C=[];const k=new Map;h.get(v+"/api/v1/subjectSelection/availableSubjects",{headers:{Authorization:V.get("Authorization")}}).then(s=>{console.log(s),C=s.data,C.forEach(l=>{k.set(l.subjectCode,{subjectName:l.subjectName,subjectRep:l.subjectRep})}),console.log(k),console.log(k.get(101))}),h.get(v+"/api/v1/subjectSelection/studentSelections",{headers:{Authorization:V.get("Authorization")}}).then(s=>{console.log(s),_.value.data=s.data;var l;l=Object.keys(_.value.data[0]);for(var e=0;e<l.length-1;e++)d.value.data.push({title:l[e],value:l[e],align:"center",key:l[e],type:1});for(var t=Object.keys(s.data[0].subjectSelection),e=0;e<t.length;e++){var n=t[e],N="   "+n+"  (Select One)  ";n=="hasSelected"&&(N="Subjects"),n!="studentId"&&d.value.data.push({title:N,value:n,key:"subjectSelection."+n,type:2})}d.value.data.push({title:"Action",value:"action"})});const I=s=>{console.log(s),h.put(v+"/api/v1/subjectSelection/updateSelection",s.subjectSelection,{headers:{Authorization:V.get("Authorization")}}).then(l=>{console.log(l),s.success=!0,window.setTimeout(()=>{s.success=null},2e3)})},f=c({grade:"All",stream:"All"}),x=()=>{console.log("grading")};return(s,l)=>(i(),p("div",null,[a(A,null,{default:o(()=>[a(m,null,{default:o(()=>[a(U,null,{default:o(()=>[a(z,null,{default:o(()=>[F(" Subjects Selections ")]),_:1}),a(B,null,{default:o(()=>[a(Y,null,{default:o(()=>[a(A,null,{default:o(()=>[a(m,null,{default:o(()=>[a(S,{label:"Form (stage)",placeholder:"",items:["All","1","2","3","4"],modelValue:u(f).grade,"onUpdate:modelValue":l[0]||(l[0]=e=>u(f).grade=e),"onClick:append":x},null,8,["modelValue"])]),_:1}),a(m,null,{default:o(()=>[a(S,{label:"Stream",placeholder:"Select Stream",items:["All","A","B","C"],modelValue:u(f).stream,"onUpdate:modelValue":l[1]||(l[1]=e=>u(f).stream=e),onChange:x},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(A,null,{default:o(()=>[a(m,null,{default:o(()=>[a(U,null,{default:o(()=>[a(z,null,{default:o(()=>[J]),_:1}),a(B,null,{default:o(()=>[a(m,null,{default:o(()=>[a(Z,{modelValue:u(j).search,"onUpdate:modelValue":l[2]||(l[2]=e=>u(j).search=e),label:"Search",clearable:""},null,8,["modelValue"])]),_:1}),a($,{items:u(_).data,search:u(j).search,class:"elevation-1 w-100 d-block",striped:"","items-per-page":20,headers:u(d).data},{item:o(({item:e})=>[(i(),p("tr",{key:e.admNo},[(i(!0),p(O,null,q(u(d).data,t=>(i(),p("td",{key:t.key,align:"center"},[t.type==1?(i(),p("span",K,D(e[t.key]),1)):g("",!0),t.type==2&&t.title=="Subjects"&&t.title!="Action"?(i(),y(S,{key:1,modelValue:e.subjectSelection[t.value],"onUpdate:modelValue":n=>e.subjectSelection[t.value]=n,label:e.admNo+"("+t.title,class:"w-100 inputMarks",items:[{title:"All",value:!1},{title:"Selection",value:!0}]},null,8,["modelValue","onUpdate:modelValue","label"])):g("",!0),t.type==2&&t.title!="Subjects"&&t.title!="Action"?(i(),y(S,{key:2,modelValue:e.subjectSelection[t.value],"onUpdate:modelValue":n=>e.subjectSelection[t.value]=n,class:"w-100",label:e.admNo+"("+t.title,items:u(r).optionalsReadable.get(t.value)},null,8,["modelValue","onUpdate:modelValue","label","items"])):g("",!0),t.title=="Action"?(i(),y(G,{key:3,color:e.success!=null?"success":"primary",text:e.success!=null?"Updated":"Update",onClick:E(n=>I(e),["prevent"])},null,8,["color","text","onClick"])):g("",!0)]))),128))]))]),_:1},8,["items","search","headers"])]),_:1})]),_:1})]),_:1})]),_:1})]))}},ye=M(P,[["__scopeId","data-v-d1f0a274"]]);export{ye as default};
